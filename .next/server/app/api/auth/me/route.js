"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_adhit_Desktop_lms_platform_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/app/api/auth/me/route.ts */ \"(rsc)/./src/app/api/auth/me/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\adhit\\\\Desktop\\\\lms-platform\\\\src\\\\app\\\\api\\\\auth\\\\me\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_adhit_Desktop_lms_platform_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/me/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhZGhpdCU1Q0Rlc2t0b3AlNUNsbXMtcGxhdGZvcm0lNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2FkaGl0JTVDRGVza3RvcCU1Q2xtcy1wbGF0Zm9ybSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDd0M7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG1zLXBsYXRmb3JtLz8zYWMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGFkaGl0XFxcXERlc2t0b3BcXFxcbG1zLXBsYXRmb3JtXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcbWVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbWUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL21lXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL21lL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYWRoaXRcXFxcRGVza3RvcFxcXFxsbXMtcGxhdGZvcm1cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxtZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL21lL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/me/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/auth/me/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db/index.ts\");\n/* harmony import */ var _lib_db_schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db/schema */ \"(rsc)/./src/lib/db/schema.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n\n\n\n\n\nasync function GET(request) {\n    try {\n        const token = request.cookies.get(\"token\")?.value;\n        if (!token) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        const decoded = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(token);\n        if (!decoded || !decoded.userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"Invalid token\"\n            }, {\n                status: 401\n            });\n        }\n        // Get user from database\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.id, decoded.userId)).limit(1);\n        if (!user.length) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"User not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Log user data for debugging\n        const phoneValue = user[0].phone;\n        const phoneString = phoneValue && String(phoneValue).trim() ? String(phoneValue).trim() : null;\n        console.log(\"User data from database:\", {\n            id: user[0].id,\n            name: user[0].name,\n            email: user[0].email,\n            phone: phoneValue,\n            phoneType: typeof phoneValue,\n            phoneIsNull: phoneValue === null,\n            phoneIsUndefined: phoneValue === undefined,\n            phoneIsEmptyString: phoneValue === \"\",\n            phoneAfterProcessing: phoneString,\n            role: user[0].role\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            user: {\n                id: user[0].id,\n                name: user[0].name,\n                email: user[0].email,\n                phone: phoneString,\n                bio: user[0].bio && String(user[0].bio).trim() ? String(user[0].bio).trim() : null,\n                profilePicture: user[0].profilePicture || null,\n                role: user[0].role,\n                isActive: user[0].isActive,\n                faceIdEnrolled: user[0].faceIdEnrolled,\n                fingerprintEnrolled: user[0].fingerprintEnrolled,\n                twoFactorEnabled: user[0].twoFactorEnabled,\n                joinedDate: user[0].joinedDate ? new Date(user[0].joinedDate).toISOString() : null,\n                lastLogin: user[0].lastLogin ? new Date(user[0].lastLogin).toISOString() : null\n            }\n        });\n    } catch (error) {\n        console.error(\"Get current user error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Failed to get user\",\n            error:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLOUIsSUFBSSxDQUFDLEVBQUUsQ0FBQzZCLFVBQVUsRUFBRUUsV0FBVyxLQUFLO2dCQUM5RUMsV0FBV2hDLElBQUksQ0FBQyxFQUFFLENBQUNnQyxTQUFTLEdBQUcsSUFBSUYsS0FBSzlCLElBQUksQ0FBQyxFQUFFLENBQUNnQyxTQUFTLEVBQUVELFdBQVcsS0FBSztZQUM3RTtRQUNGO0lBQ0YsRUFBRSxPQUFPRSxPQUFZO1FBQ25CckIsUUFBUXFCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9qRCxrRkFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RxQyxPQUFPQyxLQUF5QixHQUFnQkQsTUFBTXJDLE9BQU8sR0FBR3VCLENBQVNBO1FBQzNFLEdBQ0E7WUFBRXRCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG1zLXBsYXRmb3JtLy4vc3JjL2FwcC9hcGkvYXV0aC9tZS9yb3V0ZS50cz81OGJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9saWIvZGInO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJ0AvbGliL2RiL3NjaGVtYSc7XHJcbmltcG9ydCB7IGVxIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcXVlc3QuY29va2llcy5nZXQoJ3Rva2VuJyk/LnZhbHVlO1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgbWVzc2FnZTogJ05vdCBhdXRoZW50aWNhdGVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XHJcblxyXG4gICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLnVzZXJJZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBtZXNzYWdlOiAnSW52YWxpZCB0b2tlbicgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdXNlciBmcm9tIGRhdGFiYXNlXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGJcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5mcm9tKHVzZXJzKVxyXG4gICAgICAud2hlcmUoZXEodXNlcnMuaWQsIGRlY29kZWQudXNlcklkKSlcclxuICAgICAgLmxpbWl0KDEpO1xyXG5cclxuICAgIGlmICghdXNlci5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB1c2VyIGRhdGEgZm9yIGRlYnVnZ2luZ1xyXG4gICAgY29uc3QgcGhvbmVWYWx1ZSA9IHVzZXJbMF0ucGhvbmU7XHJcbiAgICBjb25zdCBwaG9uZVN0cmluZyA9IHBob25lVmFsdWUgJiYgU3RyaW5nKHBob25lVmFsdWUpLnRyaW0oKSA/IFN0cmluZyhwaG9uZVZhbHVlKS50cmltKCkgOiBudWxsO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnVXNlciBkYXRhIGZyb20gZGF0YWJhc2U6Jywge1xyXG4gICAgICBpZDogdXNlclswXS5pZCxcclxuICAgICAgbmFtZTogdXNlclswXS5uYW1lLFxyXG4gICAgICBlbWFpbDogdXNlclswXS5lbWFpbCxcclxuICAgICAgcGhvbmU6IHBob25lVmFsdWUsXHJcbiAgICAgIHBob25lVHlwZTogdHlwZW9mIHBob25lVmFsdWUsXHJcbiAgICAgIHBob25lSXNOdWxsOiBwaG9uZVZhbHVlID09PSBudWxsLFxyXG4gICAgICBwaG9uZUlzVW5kZWZpbmVkOiBwaG9uZVZhbHVlID09PSB1bmRlZmluZWQsXHJcbiAgICAgIHBob25lSXNFbXB0eVN0cmluZzogcGhvbmVWYWx1ZSA9PT0gJycsXHJcbiAgICAgIHBob25lQWZ0ZXJQcm9jZXNzaW5nOiBwaG9uZVN0cmluZyxcclxuICAgICAgcm9sZTogdXNlclswXS5yb2xlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIGlkOiB1c2VyWzBdLmlkLFxyXG4gICAgICAgIG5hbWU6IHVzZXJbMF0ubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlclswXS5lbWFpbCxcclxuICAgICAgICBwaG9uZTogcGhvbmVTdHJpbmcsIC8vIENvbnZlcnQgdG8gc3RyaW5nIGFuZCB0cmltLCBvciBudWxsIGlmIGVtcHR5XHJcbiAgICAgICAgYmlvOiB1c2VyWzBdLmJpbyAmJiBTdHJpbmcodXNlclswXS5iaW8pLnRyaW0oKSA/IFN0cmluZyh1c2VyWzBdLmJpbykudHJpbSgpIDogbnVsbCxcclxuICAgICAgICBwcm9maWxlUGljdHVyZTogdXNlclswXS5wcm9maWxlUGljdHVyZSB8fCBudWxsLFxyXG4gICAgICAgIHJvbGU6IHVzZXJbMF0ucm9sZSxcclxuICAgICAgICBpc0FjdGl2ZTogdXNlclswXS5pc0FjdGl2ZSxcclxuICAgICAgICBmYWNlSWRFbnJvbGxlZDogdXNlclswXS5mYWNlSWRFbnJvbGxlZCxcclxuICAgICAgICBmaW5nZXJwcmludEVucm9sbGVkOiB1c2VyWzBdLmZpbmdlcnByaW50RW5yb2xsZWQsXHJcbiAgICAgICAgdHdvRmFjdG9yRW5hYmxlZDogdXNlclswXS50d29GYWN0b3JFbmFibGVkLFxyXG4gICAgICAgIGpvaW5lZERhdGU6IHVzZXJbMF0uam9pbmVkRGF0ZSA/IG5ldyBEYXRlKHVzZXJbMF0uam9pbmVkRGF0ZSkudG9JU09TdHJpbmcoKSA6IG51bGwsXHJcbiAgICAgICAgbGFzdExvZ2luOiB1c2VyWzBdLmxhc3RMb2dpbiA/IG5ldyBEYXRlKHVzZXJbMF0ubGFzdExvZ2luKS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBjdXJyZW50IHVzZXIgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZ2V0IHVzZXInLFxyXG4gICAgICAgIGVycm9yOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWRcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInZlcmlmeVRva2VuIiwiZGIiLCJ1c2VycyIsImVxIiwiR0VUIiwicmVxdWVzdCIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJkZWNvZGVkIiwidXNlcklkIiwidXNlciIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsImlkIiwibGltaXQiLCJsZW5ndGgiLCJwaG9uZVZhbHVlIiwicGhvbmUiLCJwaG9uZVN0cmluZyIsIlN0cmluZyIsInRyaW0iLCJjb25zb2xlIiwibG9nIiwibmFtZSIsImVtYWlsIiwicGhvbmVUeXBlIiwicGhvbmVJc051bGwiLCJwaG9uZUlzVW5kZWZpbmVkIiwidW5kZWZpbmVkIiwicGhvbmVJc0VtcHR5U3RyaW5nIiwicGhvbmVBZnRlclByb2Nlc3NpbmciLCJyb2xlIiwiYmlvIiwicHJvZmlsZVBpY3R1cmUiLCJpc0FjdGl2ZSIsImZhY2VJZEVucm9sbGVkIiwiZmluZ2VycHJpbnRFbnJvbGxlZCIsInR3b0ZhY3RvckVuYWJsZWQiLCJqb2luZWREYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibGFzdExvZ2luIiwiZXJyb3IiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   destroyAllUserSessions: () => (/* binding */ destroyAllUserSessions),\n/* harmony export */   destroySession: () => (/* binding */ destroySession),\n/* harmony export */   generateResetToken: () => (/* binding */ generateResetToken),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserAccounts: () => (/* binding */ getUserAccounts),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   validateSession: () => (/* binding */ validateSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyResetToken: () => (/* binding */ verifyResetToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db/index.ts\");\n/* harmony import */ var _db_schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db/schema */ \"(rsc)/./src/lib/db/schema.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var _security__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./security */ \"(rsc)/./src/lib/security.ts\");\n\n\n\n\n\n\n// JWT_SECRET must be set - no fallback for security\nif (!process.env.JWT_SECRET || process.env.JWT_SECRET === \"your-secret-key\" || process.env.JWT_SECRET.length < 32) {\n    throw new Error(\"JWT_SECRET must be set in environment variables and must be at least 32 characters long. \" + \"Please set a strong random secret in .env.local\");\n}\nconst JWT_SECRET = process.env.JWT_SECRET;\nconst JWT_EXPIRES_IN = \"7d\";\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, 12);\n}\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n}\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n        isActive: user.isActive\n    }, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\nfunction verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        return {\n            id: decoded.id,\n            name: decoded.name,\n            email: decoded.email,\n            role: decoded.role,\n            isActive: decoded.isActive\n        };\n    } catch (error) {\n        return null;\n    }\n}\nasync function createSession(userId, deviceInfo, userData) {\n    // Get user data if not provided\n    let user;\n    if (userData) {\n        user = userData;\n    } else {\n        const userResult = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.id, userId)).limit(1);\n        if (!userResult.length) {\n            throw new Error(\"User not found\");\n        }\n        user = {\n            id: userResult[0].id,\n            name: userResult[0].name,\n            email: userResult[0].email,\n            role: userResult[0].role,\n            isActive: userResult[0].isActive\n        };\n    }\n    const sessionToken = generateToken(user);\n    const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 days\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.insert(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions).values({\n        userId,\n        sessionToken,\n        deviceInfo: deviceInfo ? JSON.stringify(deviceInfo) : null,\n        expiresAt\n    });\n    return sessionToken;\n}\nasync function validateSession(sessionToken) {\n    const user = verifyToken(sessionToken);\n    if (!user) return null;\n    // Check if session exists in database\n    const session = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions.sessionToken, sessionToken), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions.userId, user.id))).limit(1);\n    if (!session.length || session[0].expiresAt < new Date()) {\n        return null;\n    }\n    return user;\n}\nasync function destroySession(sessionToken) {\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.delete(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions.sessionToken, sessionToken));\n}\nasync function destroyAllUserSessions(userId) {\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.delete(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.sessions.userId, userId));\n}\nasync function authenticateUser(email, password, role) {\n    // If role is specified, authenticate that specific role\n    // Otherwise, get the first matching account (for backward compatibility)\n    const whereConditions = role ? (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.role, role), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.isActive, true)) : (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.isActive, true));\n    const user = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where(whereConditions).limit(1);\n    if (!user.length) return null;\n    const isValidPassword = await verifyPassword(password, user[0].password);\n    if (!isValidPassword) return null;\n    // Update last login\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.update(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).set({\n        lastLogin: new Date()\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.id, user[0].id));\n    return {\n        id: user[0].id,\n        name: user[0].name,\n        email: user[0].email,\n        phone: user[0].phone || null,\n        bio: user[0].bio || null,\n        role: user[0].role,\n        isActive: user[0].isActive,\n        faceIdEnrolled: user[0].faceIdEnrolled || false,\n        fingerprintEnrolled: user[0].fingerprintEnrolled || false,\n        twoFactorEnabled: user[0].twoFactorEnabled || false,\n        joinedDate: user[0].joinedDate || null\n    };\n}\n// Get all accounts (roles) for an email\nasync function getUserAccounts(email) {\n    const accounts = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.isActive, true)));\n    return accounts.map((user)=>({\n            id: user.id,\n            name: user.name,\n            email: user.email,\n            phone: user.phone || null,\n            bio: user.bio || null,\n            role: user.role,\n            isActive: user.isActive,\n            faceIdEnrolled: user.faceIdEnrolled || false,\n            fingerprintEnrolled: user.fingerprintEnrolled || false,\n            twoFactorEnabled: user.twoFactorEnabled || false,\n            joinedDate: user.joinedDate || null\n        }));\n}\nasync function createUser(userData) {\n    try {\n        console.log(\"createUser called with:\", {\n            email: userData.email,\n            role: userData.role\n        });\n        // Check if database is initialized\n        if (!_db__WEBPACK_IMPORTED_MODULE_2__.db) {\n            throw new Error(\"Database not initialized. Please check DATABASE_URL in .env.local\");\n        }\n        const hashedPassword = await hashPassword(userData.password);\n        console.log(\"Password hashed successfully\");\n        const newUser = await _db__WEBPACK_IMPORTED_MODULE_2__.db.insert(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).values({\n            name: userData.name,\n            email: userData.email,\n            password: hashedPassword,\n            phone: userData.phone,\n            role: userData.role || \"student\"\n        }).returning();\n        if (!newUser || newUser.length === 0) {\n            throw new Error(\"Failed to create user - no data returned from database\");\n        }\n        console.log(\"User inserted successfully:\", {\n            id: newUser[0].id,\n            email: newUser[0].email,\n            phone: newUser[0].phone\n        });\n        return {\n            id: newUser[0].id,\n            name: newUser[0].name,\n            email: newUser[0].email,\n            phone: newUser[0].phone || null,\n            bio: newUser[0].bio || null,\n            role: newUser[0].role,\n            isActive: newUser[0].isActive,\n            faceIdEnrolled: newUser[0].faceIdEnrolled || false,\n            fingerprintEnrolled: newUser[0].fingerprintEnrolled || false,\n            twoFactorEnabled: newUser[0].twoFactorEnabled || false,\n            joinedDate: newUser[0].joinedDate || null\n        };\n    } catch (error) {\n        console.error(\"createUser function error:\", error);\n        console.error(\"Error details:\", {\n            message: error?.message,\n            code: error?.code,\n            detail: error?.detail,\n            constraint: error?.constraint\n        });\n        throw error; // Re-throw to let the caller handle it\n    }\n}\nasync function generateResetToken(email) {\n    const user = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email)).limit(1);\n    if (!user.length) return null;\n    // Use cryptographically secure random token\n    const resetToken = (0,_security__WEBPACK_IMPORTED_MODULE_4__.generateSecureToken)(32);\n    const resetTokenExpiry = new Date(Date.now() + 60 * 60 * 1000); // 1 hour\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.update(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).set({\n        resetToken,\n        resetTokenExpiry\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.id, user[0].id));\n    return resetToken;\n}\nasync function verifyResetToken(email, token) {\n    const user = await _db__WEBPACK_IMPORTED_MODULE_2__.db.select().from(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.resetToken, token))).limit(1);\n    if (!user.length || !user[0].resetTokenExpiry) return false;\n    return user[0].resetTokenExpiry > new Date();\n}\nasync function resetPassword(email, token, newPassword) {\n    const isValid = await verifyResetToken(email, token);\n    if (!isValid) return false;\n    const hashedPassword = await hashPassword(newPassword);\n    await _db__WEBPACK_IMPORTED_MODULE_2__.db.update(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users).set({\n        password: hashedPassword,\n        resetToken: null,\n        resetTokenExpiry: null\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_db_schema__WEBPACK_IMPORTED_MODULE_3__.users.email, email));\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0YsNkNBQUtBLENBQUNzQixLQUFLLEVBQUVBLFFBQ2hCcEIsK0NBQUVBLENBQUNGLDZDQUFLQSxDQUFDOEUsVUFBVSxFQUFFbkQsU0FFdEJZLEtBQUssQ0FBQztJQUVULElBQUksQ0FBQ3JCLEtBQUtWLE1BQU0sSUFBSSxDQUFDVSxJQUFJLENBQUMsRUFBRSxDQUFDNkQsZ0JBQWdCLEVBQUUsT0FBTztJQUV0RCxPQUFPN0QsSUFBSSxDQUFDLEVBQUUsQ0FBQzZELGdCQUFnQixHQUFHLElBQUlyQztBQUN4QztBQUVPLGVBQWV1QyxjQUFjM0QsS0FBYSxFQUFFSyxLQUFhLEVBQUV1RCxXQUFtQjtJQUNuRixNQUFNQyxVQUFVLE1BQU1ILGlCQUFpQjFELE9BQU9LO0lBQzlDLElBQUksQ0FBQ3dELFNBQVMsT0FBTztJQUVyQixNQUFNcEUsaUJBQWlCLE1BQU1KLGFBQWF1RTtJQUUxQyxNQUFNbkYsbUNBQUVBLENBQ0x5RCxNQUFNLENBQUN4RCw2Q0FBS0EsRUFDWnlELEdBQUcsQ0FBQztRQUNIN0MsVUFBVUc7UUFDVitELFlBQVk7UUFDWkMsa0JBQWtCO0lBQ3BCLEdBQ0N6QyxLQUFLLENBQUNwQywrQ0FBRUEsQ0FBQ0YsNkNBQUtBLENBQUNzQixLQUFLLEVBQUVBO0lBRXpCLE9BQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2xtcy1wbGF0Zm9ybS8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9kYic7XHJcbmltcG9ydCB7IHVzZXJzLCBzZXNzaW9ucyB9IGZyb20gJy4vZGIvc2NoZW1hJztcclxuaW1wb3J0IHsgZXEsIGFuZCB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVTZWN1cmVUb2tlbiB9IGZyb20gJy4vc2VjdXJpdHknO1xyXG5cclxuLy8gSldUX1NFQ1JFVCBtdXN0IGJlIHNldCAtIG5vIGZhbGxiYWNrIGZvciBzZWN1cml0eVxyXG5pZiAoIXByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCA9PT0gJ3lvdXItc2VjcmV0LWtleScgfHwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVC5sZW5ndGggPCAzMikge1xyXG4gIHRocm93IG5ldyBFcnJvcihcclxuICAgICdKV1RfU0VDUkVUIG11c3QgYmUgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcyBhbmQgbXVzdCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcuICcgK1xyXG4gICAgJ1BsZWFzZSBzZXQgYSBzdHJvbmcgcmFuZG9tIHNlY3JldCBpbiAuZW52LmxvY2FsJ1xyXG4gICk7XHJcbn1cclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG5jb25zdCBKV1RfRVhQSVJFU19JTiA9ICc3ZCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcclxuICBpZDogbnVtYmVyO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHBob25lOiBzdHJpbmcgfCBudWxsO1xyXG4gIGJpbzogc3RyaW5nIHwgbnVsbDtcclxuICByb2xlOiBzdHJpbmc7XHJcbiAgaXNBY3RpdmU6IGJvb2xlYW47XHJcbiAgZmFjZUlkRW5yb2xsZWQ6IGJvb2xlYW47XHJcbiAgZmluZ2VycHJpbnRFbnJvbGxlZDogYm9vbGVhbjtcclxuICB0d29GYWN0b3JFbmFibGVkOiBib29sZWFuO1xyXG4gIGpvaW5lZERhdGU6IERhdGUgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTIpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBBdXRoVXNlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKFxyXG4gICAge1xyXG4gICAgICBpZDogdXNlci5pZCxcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICBpc0FjdGl2ZTogdXNlci5pc0FjdGl2ZSxcclxuICAgIH0sXHJcbiAgICBKV1RfU0VDUkVULFxyXG4gICAgeyBleHBpcmVzSW46IEpXVF9FWFBJUkVTX0lOIH1cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IEF1dGhVc2VyIHwgbnVsbCB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBhbnk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogZGVjb2RlZC5pZCxcclxuICAgICAgbmFtZTogZGVjb2RlZC5uYW1lLFxyXG4gICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbCxcclxuICAgICAgcm9sZTogZGVjb2RlZC5yb2xlLFxyXG4gICAgICBpc0FjdGl2ZTogZGVjb2RlZC5pc0FjdGl2ZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24odXNlcklkOiBudW1iZXIsIGRldmljZUluZm8/OiBhbnksIHVzZXJEYXRhPzogQXV0aFVzZXIpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIC8vIEdldCB1c2VyIGRhdGEgaWYgbm90IHByb3ZpZGVkXHJcbiAgbGV0IHVzZXI6IEF1dGhVc2VyO1xyXG4gIGlmICh1c2VyRGF0YSkge1xyXG4gICAgdXNlciA9IHVzZXJEYXRhO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCB1c2VyUmVzdWx0ID0gYXdhaXQgZGJcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5mcm9tKHVzZXJzKVxyXG4gICAgICAud2hlcmUoZXEodXNlcnMuaWQsIHVzZXJJZCkpXHJcbiAgICAgIC5saW1pdCgxKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VyUmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVzZXIgPSB7XHJcbiAgICAgIGlkOiB1c2VyUmVzdWx0WzBdLmlkLFxyXG4gICAgICBuYW1lOiB1c2VyUmVzdWx0WzBdLm5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyUmVzdWx0WzBdLmVtYWlsLFxyXG4gICAgICByb2xlOiB1c2VyUmVzdWx0WzBdLnJvbGUsXHJcbiAgICAgIGlzQWN0aXZlOiB1c2VyUmVzdWx0WzBdLmlzQWN0aXZlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGdlbmVyYXRlVG9rZW4odXNlcik7XHJcbiAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gNyBkYXlzXHJcblxyXG4gIGF3YWl0IGRiLmluc2VydChzZXNzaW9ucykudmFsdWVzKHtcclxuICAgIHVzZXJJZCxcclxuICAgIHNlc3Npb25Ub2tlbixcclxuICAgIGRldmljZUluZm86IGRldmljZUluZm8gPyBKU09OLnN0cmluZ2lmeShkZXZpY2VJbmZvKSA6IG51bGwsXHJcbiAgICBleHBpcmVzQXQsXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzZXNzaW9uVG9rZW47XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVNlc3Npb24oc2Vzc2lvblRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHVzZXIgPSB2ZXJpZnlUb2tlbihzZXNzaW9uVG9rZW4pO1xyXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XHJcblxyXG4gIC8vIENoZWNrIGlmIHNlc3Npb24gZXhpc3RzIGluIGRhdGFiYXNlXHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGRiXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5mcm9tKHNlc3Npb25zKVxyXG4gICAgLndoZXJlKFxyXG4gICAgICBhbmQoXHJcbiAgICAgICAgZXEoc2Vzc2lvbnMuc2Vzc2lvblRva2VuLCBzZXNzaW9uVG9rZW4pLFxyXG4gICAgICAgIGVxKHNlc3Npb25zLnVzZXJJZCwgdXNlci5pZClcclxuICAgICAgKVxyXG4gICAgKVxyXG4gICAgLmxpbWl0KDEpO1xyXG5cclxuICBpZiAoIXNlc3Npb24ubGVuZ3RoIHx8IHNlc3Npb25bMF0uZXhwaXJlc0F0IDwgbmV3IERhdGUoKSkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlc3Ryb3lTZXNzaW9uKHNlc3Npb25Ub2tlbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgYXdhaXQgZGIuZGVsZXRlKHNlc3Npb25zKS53aGVyZShlcShzZXNzaW9ucy5zZXNzaW9uVG9rZW4sIHNlc3Npb25Ub2tlbikpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVzdHJveUFsbFVzZXJTZXNzaW9ucyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGF3YWl0IGRiLmRlbGV0ZShzZXNzaW9ucykud2hlcmUoZXEoc2Vzc2lvbnMudXNlcklkLCB1c2VySWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgcm9sZT86IHN0cmluZyk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgLy8gSWYgcm9sZSBpcyBzcGVjaWZpZWQsIGF1dGhlbnRpY2F0ZSB0aGF0IHNwZWNpZmljIHJvbGVcclxuICAvLyBPdGhlcndpc2UsIGdldCB0aGUgZmlyc3QgbWF0Y2hpbmcgYWNjb3VudCAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXHJcbiAgY29uc3Qgd2hlcmVDb25kaXRpb25zID0gcm9sZSBcclxuICAgID8gYW5kKGVxKHVzZXJzLmVtYWlsLCBlbWFpbCksIGVxKHVzZXJzLnJvbGUsIHJvbGUpLCBlcSh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSkpXHJcbiAgICA6IGFuZChlcSh1c2Vycy5lbWFpbCwgZW1haWwpLCBlcSh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSkpO1xyXG4gIFxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYlxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuZnJvbSh1c2VycylcclxuICAgIC53aGVyZSh3aGVyZUNvbmRpdGlvbnMpXHJcbiAgICAubGltaXQoMSk7XHJcblxyXG4gIGlmICghdXNlci5sZW5ndGgpIHJldHVybiBudWxsO1xyXG5cclxuICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgdXNlclswXS5wYXNzd29yZCk7XHJcbiAgaWYgKCFpc1ZhbGlkUGFzc3dvcmQpIHJldHVybiBudWxsO1xyXG5cclxuICAvLyBVcGRhdGUgbGFzdCBsb2dpblxyXG4gIGF3YWl0IGRiXHJcbiAgICAudXBkYXRlKHVzZXJzKVxyXG4gICAgLnNldCh7IGxhc3RMb2dpbjogbmV3IERhdGUoKSB9KVxyXG4gICAgLndoZXJlKGVxKHVzZXJzLmlkLCB1c2VyWzBdLmlkKSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpZDogdXNlclswXS5pZCxcclxuICAgIG5hbWU6IHVzZXJbMF0ubmFtZSxcclxuICAgIGVtYWlsOiB1c2VyWzBdLmVtYWlsLFxyXG4gICAgcGhvbmU6IHVzZXJbMF0ucGhvbmUgfHwgbnVsbCxcclxuICAgIGJpbzogdXNlclswXS5iaW8gfHwgbnVsbCxcclxuICAgIHJvbGU6IHVzZXJbMF0ucm9sZSxcclxuICAgIGlzQWN0aXZlOiB1c2VyWzBdLmlzQWN0aXZlLFxyXG4gICAgZmFjZUlkRW5yb2xsZWQ6IHVzZXJbMF0uZmFjZUlkRW5yb2xsZWQgfHwgZmFsc2UsXHJcbiAgICBmaW5nZXJwcmludEVucm9sbGVkOiB1c2VyWzBdLmZpbmdlcnByaW50RW5yb2xsZWQgfHwgZmFsc2UsXHJcbiAgICB0d29GYWN0b3JFbmFibGVkOiB1c2VyWzBdLnR3b0ZhY3RvckVuYWJsZWQgfHwgZmFsc2UsXHJcbiAgICBqb2luZWREYXRlOiB1c2VyWzBdLmpvaW5lZERhdGUgfHwgbnVsbCxcclxuICB9O1xyXG59XHJcblxyXG4vLyBHZXQgYWxsIGFjY291bnRzIChyb2xlcykgZm9yIGFuIGVtYWlsXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQWNjb3VudHMoZW1haWw6IHN0cmluZyk6IFByb21pc2U8QXV0aFVzZXJbXT4ge1xyXG4gIGNvbnN0IGFjY291bnRzID0gYXdhaXQgZGJcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLmZyb20odXNlcnMpXHJcbiAgICAud2hlcmUoYW5kKGVxKHVzZXJzLmVtYWlsLCBlbWFpbCksIGVxKHVzZXJzLmlzQWN0aXZlLCB0cnVlKSkpO1xyXG5cclxuICByZXR1cm4gYWNjb3VudHMubWFwKHVzZXIgPT4gKHtcclxuICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICBwaG9uZTogdXNlci5waG9uZSB8fCBudWxsLFxyXG4gICAgYmlvOiB1c2VyLmJpbyB8fCBudWxsLFxyXG4gICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgaXNBY3RpdmU6IHVzZXIuaXNBY3RpdmUsXHJcbiAgICBmYWNlSWRFbnJvbGxlZDogdXNlci5mYWNlSWRFbnJvbGxlZCB8fCBmYWxzZSxcclxuICAgIGZpbmdlcnByaW50RW5yb2xsZWQ6IHVzZXIuZmluZ2VycHJpbnRFbnJvbGxlZCB8fCBmYWxzZSxcclxuICAgIHR3b0ZhY3RvckVuYWJsZWQ6IHVzZXIudHdvRmFjdG9yRW5hYmxlZCB8fCBmYWxzZSxcclxuICAgIGpvaW5lZERhdGU6IHVzZXIuam9pbmVkRGF0ZSB8fCBudWxsLFxyXG4gIH0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIodXNlckRhdGE6IHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBwYXNzd29yZDogc3RyaW5nO1xyXG4gIHBob25lPzogc3RyaW5nO1xyXG4gIHJvbGU/OiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPEF1dGhVc2VyPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdjcmVhdGVVc2VyIGNhbGxlZCB3aXRoOicsIHsgZW1haWw6IHVzZXJEYXRhLmVtYWlsLCByb2xlOiB1c2VyRGF0YS5yb2xlIH0pO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBkYXRhYmFzZSBpcyBpbml0aWFsaXplZFxyXG4gICAgaWYgKCFkYikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIG5vdCBpbml0aWFsaXplZC4gUGxlYXNlIGNoZWNrIERBVEFCQVNFX1VSTCBpbiAuZW52LmxvY2FsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoUGFzc3dvcmQodXNlckRhdGEucGFzc3dvcmQpO1xyXG4gICAgY29uc29sZS5sb2coJ1Bhc3N3b3JkIGhhc2hlZCBzdWNjZXNzZnVsbHknKTtcclxuXHJcbiAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgZGJcclxuICAgICAgLmluc2VydCh1c2VycylcclxuICAgICAgLnZhbHVlcyh7XHJcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgIHBob25lOiB1c2VyRGF0YS5waG9uZSxcclxuICAgICAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8ICdzdHVkZW50JyxcclxuICAgICAgfSlcclxuICAgICAgLnJldHVybmluZygpO1xyXG5cclxuICAgIGlmICghbmV3VXNlciB8fCBuZXdVc2VyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgdXNlciAtIG5vIGRhdGEgcmV0dXJuZWQgZnJvbSBkYXRhYmFzZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdVc2VyIGluc2VydGVkIHN1Y2Nlc3NmdWxseTonLCB7IGlkOiBuZXdVc2VyWzBdLmlkLCBlbWFpbDogbmV3VXNlclswXS5lbWFpbCwgcGhvbmU6IG5ld1VzZXJbMF0ucGhvbmUgfSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IG5ld1VzZXJbMF0uaWQsXHJcbiAgICAgIG5hbWU6IG5ld1VzZXJbMF0ubmFtZSxcclxuICAgICAgZW1haWw6IG5ld1VzZXJbMF0uZW1haWwsXHJcbiAgICAgIHBob25lOiBuZXdVc2VyWzBdLnBob25lIHx8IG51bGwsXHJcbiAgICAgIGJpbzogbmV3VXNlclswXS5iaW8gfHwgbnVsbCxcclxuICAgICAgcm9sZTogbmV3VXNlclswXS5yb2xlLFxyXG4gICAgICBpc0FjdGl2ZTogbmV3VXNlclswXS5pc0FjdGl2ZSxcclxuICAgICAgZmFjZUlkRW5yb2xsZWQ6IG5ld1VzZXJbMF0uZmFjZUlkRW5yb2xsZWQgfHwgZmFsc2UsXHJcbiAgICAgIGZpbmdlcnByaW50RW5yb2xsZWQ6IG5ld1VzZXJbMF0uZmluZ2VycHJpbnRFbnJvbGxlZCB8fCBmYWxzZSxcclxuICAgICAgdHdvRmFjdG9yRW5hYmxlZDogbmV3VXNlclswXS50d29GYWN0b3JFbmFibGVkIHx8IGZhbHNlLFxyXG4gICAgICBqb2luZWREYXRlOiBuZXdVc2VyWzBdLmpvaW5lZERhdGUgfHwgbnVsbCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignY3JlYXRlVXNlciBmdW5jdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcclxuICAgICAgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UsXHJcbiAgICAgIGNvZGU6IGVycm9yPy5jb2RlLFxyXG4gICAgICBkZXRhaWw6IGVycm9yPy5kZXRhaWwsXHJcbiAgICAgIGNvbnN0cmFpbnQ6IGVycm9yPy5jb25zdHJhaW50LFxyXG4gICAgfSk7XHJcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdG8gbGV0IHRoZSBjYWxsZXIgaGFuZGxlIGl0XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVSZXNldFRva2VuKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZGJcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLmZyb20odXNlcnMpXHJcbiAgICAud2hlcmUoZXEodXNlcnMuZW1haWwsIGVtYWlsKSlcclxuICAgIC5saW1pdCgxKTtcclxuXHJcbiAgaWYgKCF1c2VyLmxlbmd0aCkgcmV0dXJuIG51bGw7XHJcblxyXG4gIC8vIFVzZSBjcnlwdG9ncmFwaGljYWxseSBzZWN1cmUgcmFuZG9tIHRva2VuXHJcbiAgY29uc3QgcmVzZXRUb2tlbiA9IGdlbmVyYXRlU2VjdXJlVG9rZW4oMzIpO1xyXG4gIGNvbnN0IHJlc2V0VG9rZW5FeHBpcnkgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgNjAgKiA2MCAqIDEwMDApOyAvLyAxIGhvdXJcclxuXHJcbiAgYXdhaXQgZGJcclxuICAgIC51cGRhdGUodXNlcnMpXHJcbiAgICAuc2V0KHtcclxuICAgICAgcmVzZXRUb2tlbixcclxuICAgICAgcmVzZXRUb2tlbkV4cGlyeSxcclxuICAgIH0pXHJcbiAgICAud2hlcmUoZXEodXNlcnMuaWQsIHVzZXJbMF0uaWQpKTtcclxuXHJcbiAgcmV0dXJuIHJlc2V0VG9rZW47XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlSZXNldFRva2VuKGVtYWlsOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZGJcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLmZyb20odXNlcnMpXHJcbiAgICAud2hlcmUoYW5kKFxyXG4gICAgICBlcSh1c2Vycy5lbWFpbCwgZW1haWwpLFxyXG4gICAgICBlcSh1c2Vycy5yZXNldFRva2VuLCB0b2tlbilcclxuICAgICkpXHJcbiAgICAubGltaXQoMSk7XHJcblxyXG4gIGlmICghdXNlci5sZW5ndGggfHwgIXVzZXJbMF0ucmVzZXRUb2tlbkV4cGlyeSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICByZXR1cm4gdXNlclswXS5yZXNldFRva2VuRXhwaXJ5ID4gbmV3IERhdGUoKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoZW1haWw6IHN0cmluZywgdG9rZW46IHN0cmluZywgbmV3UGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2ZXJpZnlSZXNldFRva2VuKGVtYWlsLCB0b2tlbik7XHJcbiAgaWYgKCFpc1ZhbGlkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKG5ld1Bhc3N3b3JkKTtcclxuXHJcbiAgYXdhaXQgZGJcclxuICAgIC51cGRhdGUodXNlcnMpXHJcbiAgICAuc2V0KHtcclxuICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICByZXNldFRva2VuOiBudWxsLFxyXG4gICAgICByZXNldFRva2VuRXhwaXJ5OiBudWxsLFxyXG4gICAgfSlcclxuICAgIC53aGVyZShlcSh1c2Vycy5lbWFpbCwgZW1haWwpKTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsImRiIiwidXNlcnMiLCJzZXNzaW9ucyIsImVxIiwiYW5kIiwiZ2VuZXJhdGVTZWN1cmVUb2tlbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwibGVuZ3RoIiwiRXJyb3IiLCJKV1RfRVhQSVJFU19JTiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJjb21wYXJlIiwiZ2VuZXJhdGVUb2tlbiIsInVzZXIiLCJzaWduIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJyb2xlIiwiaXNBY3RpdmUiLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsImVycm9yIiwiY3JlYXRlU2Vzc2lvbiIsInVzZXJJZCIsImRldmljZUluZm8iLCJ1c2VyRGF0YSIsInVzZXJSZXN1bHQiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJsaW1pdCIsInNlc3Npb25Ub2tlbiIsImV4cGlyZXNBdCIsIkRhdGUiLCJub3ciLCJpbnNlcnQiLCJ2YWx1ZXMiLCJKU09OIiwic3RyaW5naWZ5IiwidmFsaWRhdGVTZXNzaW9uIiwic2Vzc2lvbiIsImRlc3Ryb3lTZXNzaW9uIiwiZGVsZXRlIiwiZGVzdHJveUFsbFVzZXJTZXNzaW9ucyIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ3aGVyZUNvbmRpdGlvbnMiLCJpc1ZhbGlkUGFzc3dvcmQiLCJ1cGRhdGUiLCJzZXQiLCJsYXN0TG9naW4iLCJwaG9uZSIsImJpbyIsImZhY2VJZEVucm9sbGVkIiwiZmluZ2VycHJpbnRFbnJvbGxlZCIsInR3b0ZhY3RvckVuYWJsZWQiLCJqb2luZWREYXRlIiwiZ2V0VXNlckFjY291bnRzIiwiYWNjb3VudHMiLCJtYXAiLCJjcmVhdGVVc2VyIiwiY29uc29sZSIsImxvZyIsIm5ld1VzZXIiLCJyZXR1cm5pbmciLCJtZXNzYWdlIiwiY29kZSIsImRldGFpbCIsImNvbnN0cmFpbnQiLCJnZW5lcmF0ZVJlc2V0VG9rZW4iLCJyZXNldFRva2VuIiwicmVzZXRUb2tlbkV4cGlyeSIsInZlcmlmeVJlc2V0VG9rZW4iLCJyZXNldFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJpc1ZhbGlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/index.ts":
/*!*****************************!*\
  !*** ./src/lib/db/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/neon-http */ \"(rsc)/./node_modules/drizzle-orm/neon-http/driver.js\");\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./src/lib/db/schema.ts\");\n\n\n\nlet db;\nfunction initializeDatabase() {\n    // Ensure DATABASE_URL is set for Neon DB\n    if (!process.env.DATABASE_URL) {\n        const error = new Error(\"DATABASE_URL environment variable is required. Please set it in .env.local\");\n        console.error(\" DATABASE_URL is not set! Please set it in your .env.local file.\");\n        console.error('   Example: DATABASE_URL=\"postgresql://user:pass@host.neon.tech/dbname?sslmode=require\"');\n        throw error;\n    }\n    try {\n        // Neon Postgres configuration\n        _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neonConfig.fetchConnectionCache = true;\n        const sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(process.env.DATABASE_URL);\n        db = (0,drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__.drizzle)(sql, {\n            schema: _schema__WEBPACK_IMPORTED_MODULE_1__\n        });\n        console.log(\" Database connection initialized (Neon Postgres)\");\n        return db;\n    } catch (error) {\n        console.error(\" Failed to initialize database connection:\", error);\n        throw error;\n    }\n}\n// Initialize database (will throw if DATABASE_URL is not set)\ntry {\n    db = initializeDatabase();\n} catch (error) {\n    // Don't throw at module load - let it fail when actually used\n    console.error(\"Database initialization error:\", error);\n    console.error(\"Error message:\", error?.message);\n// db will be undefined, which will cause errors when used\n// This allows the app to start but will fail on first DB operation\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0Q7QUFDWTtBQUN6QjtBQUVuQyxJQUFJSTtBQUVKLFNBQVNDO0lBQ1AseUNBQXlDO0lBQ3pDLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLEVBQUU7UUFDN0IsTUFBTUMsUUFBUSxJQUFJQyxNQUFNO1FBQ3hCQyxRQUFRRixLQUFLLENBQUM7UUFDZEUsUUFBUUYsS0FBSyxDQUFDO1FBQ2QsTUFBTUE7SUFDUjtJQUVBLElBQUk7UUFDRiw4QkFBOEI7UUFDOUJQLGdFQUFVQSxDQUFDVSxvQkFBb0IsR0FBRztRQUNsQyxNQUFNQyxNQUFNWiw4REFBSUEsQ0FBQ0ssUUFBUUMsR0FBRyxDQUFDQyxZQUFZO1FBQ3pDSixLQUFLSiw4REFBT0EsQ0FBQ2EsS0FBSztZQUFFVixNQUFNQSxzQ0FBQUE7UUFBQztRQUMzQlEsUUFBUUcsR0FBRyxDQUFDO1FBQ1osT0FBT1Y7SUFDVCxFQUFFLE9BQU9LLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLCtDQUErQ0E7UUFDN0QsTUFBTUE7SUFDUjtBQUNGO0FBRUEsOERBQThEO0FBQzlELElBQUk7SUFDRkwsS0FBS0M7QUFDUCxFQUFFLE9BQU9JLE9BQVk7SUFDbkIsOERBQThEO0lBQzlERSxRQUFRRixLQUFLLENBQUMsa0NBQWtDQTtJQUNoREUsUUFBUUYsS0FBSyxDQUFDLGtCQUFrQkEsT0FBT007QUFDdkMsMERBQTBEO0FBQzFELG1FQUFtRTtBQUNyRTtBQUVjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG1zLXBsYXRmb3JtLy4vc3JjL2xpYi9kYi9pbmRleC50cz81OGQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRyaXp6bGUgfSBmcm9tICdkcml6emxlLW9ybS9uZW9uLWh0dHAnO1xyXG5pbXBvcnQgeyBuZW9uLCBuZW9uQ29uZmlnIH0gZnJvbSAnQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzJztcclxuaW1wb3J0ICogYXMgc2NoZW1hIGZyb20gJy4vc2NoZW1hJztcclxuXHJcbmxldCBkYjogYW55O1xyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xyXG4gIC8vIEVuc3VyZSBEQVRBQkFTRV9VUkwgaXMgc2V0IGZvciBOZW9uIERCXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdEQVRBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQuIFBsZWFzZSBzZXQgaXQgaW4gLmVudi5sb2NhbCcpO1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIERBVEFCQVNFX1VSTCBpcyBub3Qgc2V0ISBQbGVhc2Ugc2V0IGl0IGluIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpO1xyXG4gICAgY29uc29sZS5lcnJvcignICAgRXhhbXBsZTogREFUQUJBU0VfVVJMPVwicG9zdGdyZXNxbDovL3VzZXI6cGFzc0Bob3N0Lm5lb24udGVjaC9kYm5hbWU/c3NsbW9kZT1yZXF1aXJlXCInKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIE5lb24gUG9zdGdyZXMgY29uZmlndXJhdGlvblxyXG4gICAgbmVvbkNvbmZpZy5mZXRjaENvbm5lY3Rpb25DYWNoZSA9IHRydWU7XHJcbiAgICBjb25zdCBzcWwgPSBuZW9uKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XHJcbiAgICBkYiA9IGRyaXp6bGUoc3FsLCB7IHNjaGVtYSB9KTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGlvbiBpbml0aWFsaXplZCAoTmVvbiBQb3N0Z3JlcyknKTtcclxuICAgIHJldHVybiBkYjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIGNvbm5lY3Rpb246JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlICh3aWxsIHRocm93IGlmIERBVEFCQVNFX1VSTCBpcyBub3Qgc2V0KVxyXG50cnkge1xyXG4gIGRiID0gaW5pdGlhbGl6ZURhdGFiYXNlKCk7XHJcbn0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAvLyBEb24ndCB0aHJvdyBhdCBtb2R1bGUgbG9hZCAtIGxldCBpdCBmYWlsIHdoZW4gYWN0dWFsbHkgdXNlZFxyXG4gIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICBjb25zb2xlLmVycm9yKCdFcnJvciBtZXNzYWdlOicsIGVycm9yPy5tZXNzYWdlKTtcclxuICAvLyBkYiB3aWxsIGJlIHVuZGVmaW5lZCwgd2hpY2ggd2lsbCBjYXVzZSBlcnJvcnMgd2hlbiB1c2VkXHJcbiAgLy8gVGhpcyBhbGxvd3MgdGhlIGFwcCB0byBzdGFydCBidXQgd2lsbCBmYWlsIG9uIGZpcnN0IERCIG9wZXJhdGlvblxyXG59XHJcblxyXG5leHBvcnQgeyBkYiB9O1xyXG4iXSwibmFtZXMiOlsiZHJpenpsZSIsIm5lb24iLCJuZW9uQ29uZmlnIiwic2NoZW1hIiwiZGIiLCJpbml0aWFsaXplRGF0YWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwiZXJyb3IiLCJFcnJvciIsImNvbnNvbGUiLCJmZXRjaENvbm5lY3Rpb25DYWNoZSIsInNxbCIsImxvZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/schema.ts":
/*!******************************!*\
  !*** ./src/lib/db/schema.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accessRequests: () => (/* binding */ accessRequests),\n/* harmony export */   accessRequestsRelations: () => (/* binding */ accessRequestsRelations),\n/* harmony export */   blogPosts: () => (/* binding */ blogPosts),\n/* harmony export */   chapters: () => (/* binding */ chapters),\n/* harmony export */   chaptersRelations: () => (/* binding */ chaptersRelations),\n/* harmony export */   courses: () => (/* binding */ courses),\n/* harmony export */   coursesRelations: () => (/* binding */ coursesRelations),\n/* harmony export */   dailyVideos: () => (/* binding */ dailyVideos),\n/* harmony export */   dailyVideosRelations: () => (/* binding */ dailyVideosRelations),\n/* harmony export */   modules: () => (/* binding */ modules),\n/* harmony export */   modulesRelations: () => (/* binding */ modulesRelations),\n/* harmony export */   notifications: () => (/* binding */ notifications),\n/* harmony export */   notificationsRelations: () => (/* binding */ notificationsRelations),\n/* harmony export */   payments: () => (/* binding */ payments),\n/* harmony export */   paymentsRelations: () => (/* binding */ paymentsRelations),\n/* harmony export */   quizQuestions: () => (/* binding */ quizQuestions),\n/* harmony export */   quizQuestionsRelations: () => (/* binding */ quizQuestionsRelations),\n/* harmony export */   quizzes: () => (/* binding */ quizzes),\n/* harmony export */   quizzesRelations: () => (/* binding */ quizzesRelations),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   sessionsRelations: () => (/* binding */ sessionsRelations),\n/* harmony export */   studentProgress: () => (/* binding */ studentProgress),\n/* harmony export */   studentProgressRelations: () => (/* binding */ studentProgressRelations),\n/* harmony export */   users: () => (/* binding */ users),\n/* harmony export */   usersRelations: () => (/* binding */ usersRelations)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/serial.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/unique-constraint.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/real.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/relations.js\");\n\n\n// Users table\n// Changed: email is no longer unique alone - now (email, role) must be unique together\n// This allows same email to have both student and admin accounts\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"users\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"name\").notNull(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"email\").notNull(),\n    password: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"password\").notNull(),\n    phone: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"phone\"),\n    role: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"role\").notNull().default(\"student\"),\n    isActive: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_active\").notNull().default(true),\n    faceIdEnrolled: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"face_id_enrolled\").notNull().default(false),\n    faceTemplate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"face_template\"),\n    fingerprintEnrolled: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"fingerprint_enrolled\").notNull().default(false),\n    fingerprintCredentialId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"fingerprint_credential_id\"),\n    twoFactorEnabled: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"two_factor_enabled\").notNull().default(false),\n    twoFactorSecret: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"two_factor_secret\"),\n    twoFactorBackupCodes: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"two_factor_backup_codes\"),\n    bio: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"bio\"),\n    profilePicture: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"profile_picture\"),\n    joinedDate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"joined_date\").notNull().defaultNow(),\n    lastLogin: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"last_login\"),\n    resetToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"reset_token\"),\n    resetTokenExpiry: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"reset_token_expiry\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n}, (table)=>({\n        // Composite unique constraint: same email can have student AND admin accounts\n        // But cannot have duplicate student or duplicate admin with same email\n        emailRoleUnique: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.unique)(\"users_email_role_unique\").on(table.email, table.role)\n    }));\n// Courses table\nconst courses = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"courses\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\").notNull(),\n    instructor: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"instructor\").notNull(),\n    thumbnail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"thumbnail\"),\n    pricing: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.real)(\"pricing\"),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"status\").notNull().default(\"draft\"),\n    isRequestable: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_requestable\").notNull().default(true),\n    isDefaultUnlocked: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_default_unlocked\").notNull().default(false),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Modules table\nconst modules = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"modules\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    courseId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"course_id\").notNull().references(()=>courses.id, {\n        onDelete: \"cascade\"\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\"),\n    order: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"order\").notNull(),\n    isPublished: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_published\").notNull().default(true),\n    duration: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"duration\").notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Chapters table\nconst chapters = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"chapters\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    moduleId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"module_id\").notNull().references(()=>modules.id, {\n        onDelete: \"cascade\"\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\"),\n    type: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"type\").notNull(),\n    order: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"order\").notNull(),\n    isPublished: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_published\").notNull().default(true),\n    prerequisiteChapterId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"prerequisite_chapter_id\"),\n    // Video specific fields\n    videoUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"video_url\"),\n    videoProvider: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"video_provider\"),\n    videoDuration: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"video_duration\"),\n    transcript: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"transcript\"),\n    // Textbook specific fields\n    textbookContent: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"textbook_content\"),\n    textbookFileUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"textbook_file_url\"),\n    readingTime: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"reading_time\"),\n    // MCQ specific fields\n    mcqData: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"mcq_data\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Quizzes table\nconst quizzes = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"quizzes\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    chapterId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"chapter_id\").notNull().references(()=>chapters.id, {\n        onDelete: \"cascade\"\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    passMark: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"pass_mark\").notNull().default(70),\n    timeLimit: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"time_limit\"),\n    showAnswers: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"show_answers\").notNull().default(true),\n    maxAttempts: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"max_attempts\").notNull().default(3),\n    isPublished: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_published\").notNull().default(true),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Quiz Questions table\nconst quizQuestions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"quiz_questions\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    quizId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"quiz_id\").notNull().references(()=>quizzes.id, {\n        onDelete: \"cascade\"\n    }),\n    question: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"question\").notNull(),\n    options: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"options\").notNull(),\n    correctAnswer: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"correct_answer\").notNull(),\n    explanation: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"explanation\"),\n    order: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"order\").notNull()\n});\n// Blog Posts table\nconst blogPosts = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"blog_posts\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    slug: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"slug\").unique().notNull(),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"content\").notNull(),\n    author: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"author\").notNull(),\n    cover: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"cover\"),\n    tags: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"tags\").notNull().default(\"[]\"),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"status\").notNull().default(\"draft\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Access Requests table\nconst accessRequests = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"access_requests\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    studentId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"student_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    courseId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"course_id\").notNull().references(()=>courses.id, {\n        onDelete: \"cascade\"\n    }),\n    reason: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"reason\"),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"status\").notNull().default(\"pending\"),\n    requestedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"requested_at\").notNull().defaultNow(),\n    reviewedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"reviewed_at\"),\n    reviewedBy: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"reviewed_by\").references(()=>users.id)\n});\n// Student Progress table\nconst studentProgress = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"student_progress\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    studentId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"student_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    courseId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"course_id\").notNull().references(()=>courses.id, {\n        onDelete: \"cascade\"\n    }),\n    completedChapters: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"completed_chapters\").notNull().default(\"[]\"),\n    watchedVideos: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"watched_videos\").notNull().default(\"[]\"),\n    quizAttempts: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"quiz_attempts\").notNull().default(\"[]\"),\n    totalProgress: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"total_progress\").notNull().default(0),\n    lastAccessed: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"last_accessed\").notNull().defaultNow()\n});\n// Daily Videos table\nconst dailyVideos = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"daily_videos\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    chapterId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"chapter_id\").notNull().references(()=>chapters.id, {\n        onDelete: \"cascade\"\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\"),\n    day: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"day\").notNull(),\n    isActive: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_active\").notNull().default(true),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow()\n});\n// Notifications table\nconst notifications = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"notifications\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    message: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"message\").notNull(),\n    type: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"type\").notNull().default(\"info\"),\n    isRead: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"is_read\").notNull().default(false),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow()\n});\n// Sessions table for session management\nconst sessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"sessions\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    sessionToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"session_token\").unique().notNull(),\n    deviceInfo: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"device_info\"),\n    expiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"expires_at\").notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow()\n});\n// Payments/Transactions table\nconst payments = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"payments\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)(\"id\").primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    courseId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.integer)(\"course_id\").notNull().references(()=>courses.id, {\n        onDelete: \"cascade\"\n    }),\n    amount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.real)(\"amount\").notNull(),\n    currency: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"currency\").notNull().default(\"INR\"),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"status\").notNull().default(\"pending\"),\n    stripePaymentIntentId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"stripe_payment_intent_id\"),\n    stripeSessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"stripe_session_id\"),\n    paymentMethod: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"payment_method\"),\n    transactionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"transaction_id\"),\n    metadata: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"metadata\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").notNull().defaultNow()\n});\n// Relations\nconst usersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(users, ({ many })=>({\n        accessRequests: many(accessRequests),\n        studentProgress: many(studentProgress),\n        notifications: many(notifications),\n        sessions: many(sessions),\n        reviewedRequests: many(accessRequests, {\n            relationName: \"reviewer\"\n        })\n    }));\nconst coursesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(courses, ({ many })=>({\n        modules: many(modules),\n        accessRequests: many(accessRequests),\n        studentProgress: many(studentProgress)\n    }));\nconst modulesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(modules, ({ one, many })=>({\n        course: one(courses, {\n            fields: [\n                modules.courseId\n            ],\n            references: [\n                courses.id\n            ]\n        }),\n        chapters: many(chapters)\n    }));\nconst chaptersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(chapters, ({ one, many })=>({\n        module: one(modules, {\n            fields: [\n                chapters.moduleId\n            ],\n            references: [\n                modules.id\n            ]\n        }),\n        prerequisiteChapter: one(chapters, {\n            fields: [\n                chapters.prerequisiteChapterId\n            ],\n            references: [\n                chapters.id\n            ]\n        }),\n        quizzes: many(quizzes),\n        dailyVideos: many(dailyVideos)\n    }));\nconst quizzesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(quizzes, ({ one, many })=>({\n        chapter: one(chapters, {\n            fields: [\n                quizzes.chapterId\n            ],\n            references: [\n                chapters.id\n            ]\n        }),\n        questions: many(quizQuestions)\n    }));\nconst quizQuestionsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(quizQuestions, ({ one })=>({\n        quiz: one(quizzes, {\n            fields: [\n                quizQuestions.quizId\n            ],\n            references: [\n                quizzes.id\n            ]\n        })\n    }));\nconst accessRequestsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(accessRequests, ({ one })=>({\n        student: one(users, {\n            fields: [\n                accessRequests.studentId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        course: one(courses, {\n            fields: [\n                accessRequests.courseId\n            ],\n            references: [\n                courses.id\n            ]\n        }),\n        reviewer: one(users, {\n            fields: [\n                accessRequests.reviewedBy\n            ],\n            references: [\n                users.id\n            ],\n            relationName: \"reviewer\"\n        })\n    }));\nconst studentProgressRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(studentProgress, ({ one })=>({\n        student: one(users, {\n            fields: [\n                studentProgress.studentId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        course: one(courses, {\n            fields: [\n                studentProgress.courseId\n            ],\n            references: [\n                courses.id\n            ]\n        })\n    }));\nconst dailyVideosRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(dailyVideos, ({ one })=>({\n        chapter: one(chapters, {\n            fields: [\n                dailyVideos.chapterId\n            ],\n            references: [\n                chapters.id\n            ]\n        })\n    }));\nconst notificationsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(notifications, ({ one })=>({\n        user: one(users, {\n            fields: [\n                notifications.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst sessionsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(sessions, ({ one })=>({\n        user: one(users, {\n            fields: [\n                sessions.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst paymentsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.relations)(payments, ({ one })=>({\n        user: one(users, {\n            fields: [\n                payments.userId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        course: one(courses, {\n            fields: [\n                payments.courseId\n            ],\n            references: [\n                courses.id\n            ]\n        })\n    }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnBJLHNEQUFTQSxDQUFDbUcsVUFBVSxDQUFDLEVBQUVjLEdBQUcsRUFBRSxHQUFNO1FBQ2pFaUIsTUFBTWpCLElBQUloSCxPQUFPO1lBQ2ZrSCxRQUFRO2dCQUFDaEIsU0FBU1AsTUFBTTthQUFDO1lBQ3pCbEQsWUFBWTtnQkFBQ3pDLE1BQU1DLEVBQUU7YUFBQztRQUN4QjtRQUNBZ0gsUUFBUUQsSUFBSWxGLFNBQVM7WUFDbkJvRixRQUFRO2dCQUFDaEIsU0FBUzFELFFBQVE7YUFBQztZQUMzQkMsWUFBWTtnQkFBQ1gsUUFBUTdCLEVBQUU7YUFBQztRQUMxQjtJQUNGLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sbXMtcGxhdGZvcm0vLi9zcmMvbGliL2RiL3NjaGVtYS50cz82MmI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBnVGFibGUsIHRleHQsIHNlcmlhbCwgaW50ZWdlciwgcmVhbCwgYm9vbGVhbiwgdGltZXN0YW1wLCB1bmlxdWUgfSBmcm9tICdkcml6emxlLW9ybS9wZy1jb3JlJztcclxuaW1wb3J0IHsgcmVsYXRpb25zIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xyXG5cclxuLy8gVXNlcnMgdGFibGVcclxuLy8gQ2hhbmdlZDogZW1haWwgaXMgbm8gbG9uZ2VyIHVuaXF1ZSBhbG9uZSAtIG5vdyAoZW1haWwsIHJvbGUpIG11c3QgYmUgdW5pcXVlIHRvZ2V0aGVyXHJcbi8vIFRoaXMgYWxsb3dzIHNhbWUgZW1haWwgdG8gaGF2ZSBib3RoIHN0dWRlbnQgYW5kIGFkbWluIGFjY291bnRzXHJcbmV4cG9ydCBjb25zdCB1c2VycyA9IHBnVGFibGUoJ3VzZXJzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIG5hbWU6IHRleHQoJ25hbWUnKS5ub3ROdWxsKCksXHJcbiAgZW1haWw6IHRleHQoJ2VtYWlsJykubm90TnVsbCgpLCAvLyBSZW1vdmVkIC51bmlxdWUoKSAtIG5vdyBwYXJ0IG9mIGNvbXBvc2l0ZSB1bmlxdWVcclxuICBwYXNzd29yZDogdGV4dCgncGFzc3dvcmQnKS5ub3ROdWxsKCksXHJcbiAgcGhvbmU6IHRleHQoJ3Bob25lJyksXHJcbiAgcm9sZTogdGV4dCgncm9sZScpLm5vdE51bGwoKS5kZWZhdWx0KCdzdHVkZW50JyksXHJcbiAgaXNBY3RpdmU6IGJvb2xlYW4oJ2lzX2FjdGl2ZScpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxyXG4gIGZhY2VJZEVucm9sbGVkOiBib29sZWFuKCdmYWNlX2lkX2Vucm9sbGVkJykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGZhY2VUZW1wbGF0ZTogdGV4dCgnZmFjZV90ZW1wbGF0ZScpLFxyXG4gIGZpbmdlcnByaW50RW5yb2xsZWQ6IGJvb2xlYW4oJ2ZpbmdlcnByaW50X2Vucm9sbGVkJykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGZpbmdlcnByaW50Q3JlZGVudGlhbElkOiB0ZXh0KCdmaW5nZXJwcmludF9jcmVkZW50aWFsX2lkJyksIC8vIFdlYkF1dGhuIGNyZWRlbnRpYWwgSURcclxuICB0d29GYWN0b3JFbmFibGVkOiBib29sZWFuKCd0d29fZmFjdG9yX2VuYWJsZWQnKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXHJcbiAgdHdvRmFjdG9yU2VjcmV0OiB0ZXh0KCd0d29fZmFjdG9yX3NlY3JldCcpLCAvLyBUT1RQIHNlY3JldFxyXG4gIHR3b0ZhY3RvckJhY2t1cENvZGVzOiB0ZXh0KCd0d29fZmFjdG9yX2JhY2t1cF9jb2RlcycpLCAvLyBKU09OIGFycmF5IG9mIGJhY2t1cCBjb2Rlc1xyXG4gIGJpbzogdGV4dCgnYmlvJyksXHJcbiAgcHJvZmlsZVBpY3R1cmU6IHRleHQoJ3Byb2ZpbGVfcGljdHVyZScpLCAvLyBVUkwgb3IgcGF0aCB0byBwcm9maWxlIHBpY3R1cmVcclxuICBqb2luZWREYXRlOiB0aW1lc3RhbXAoJ2pvaW5lZF9kYXRlJykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxuICBsYXN0TG9naW46IHRpbWVzdGFtcCgnbGFzdF9sb2dpbicpLFxyXG4gIHJlc2V0VG9rZW46IHRleHQoJ3Jlc2V0X3Rva2VuJyksXHJcbiAgcmVzZXRUb2tlbkV4cGlyeTogdGltZXN0YW1wKCdyZXNldF90b2tlbl9leHBpcnknKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59LCAodGFibGUpID0+ICh7XHJcbiAgLy8gQ29tcG9zaXRlIHVuaXF1ZSBjb25zdHJhaW50OiBzYW1lIGVtYWlsIGNhbiBoYXZlIHN0dWRlbnQgQU5EIGFkbWluIGFjY291bnRzXHJcbiAgLy8gQnV0IGNhbm5vdCBoYXZlIGR1cGxpY2F0ZSBzdHVkZW50IG9yIGR1cGxpY2F0ZSBhZG1pbiB3aXRoIHNhbWUgZW1haWxcclxuICBlbWFpbFJvbGVVbmlxdWU6IHVuaXF1ZSgndXNlcnNfZW1haWxfcm9sZV91bmlxdWUnKS5vbih0YWJsZS5lbWFpbCwgdGFibGUucm9sZSksXHJcbn0pKTtcclxuXHJcbi8vIENvdXJzZXMgdGFibGVcclxuZXhwb3J0IGNvbnN0IGNvdXJzZXMgPSBwZ1RhYmxlKCdjb3Vyc2VzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIHRpdGxlOiB0ZXh0KCd0aXRsZScpLm5vdE51bGwoKSxcclxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKS5ub3ROdWxsKCksXHJcbiAgaW5zdHJ1Y3RvcjogdGV4dCgnaW5zdHJ1Y3RvcicpLm5vdE51bGwoKSxcclxuICB0aHVtYm5haWw6IHRleHQoJ3RodW1ibmFpbCcpLFxyXG4gIHByaWNpbmc6IHJlYWwoJ3ByaWNpbmcnKSxcclxuICBzdGF0dXM6IHRleHQoJ3N0YXR1cycpLm5vdE51bGwoKS5kZWZhdWx0KCdkcmFmdCcpLFxyXG4gIGlzUmVxdWVzdGFibGU6IGJvb2xlYW4oJ2lzX3JlcXVlc3RhYmxlJykubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXHJcbiAgaXNEZWZhdWx0VW5sb2NrZWQ6IGJvb2xlYW4oJ2lzX2RlZmF1bHRfdW5sb2NrZWQnKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyBNb2R1bGVzIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBtb2R1bGVzID0gcGdUYWJsZSgnbW9kdWxlcycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBjb3Vyc2VJZDogaW50ZWdlcignY291cnNlX2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gY291cnNlcy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHRpdGxlOiB0ZXh0KCd0aXRsZScpLm5vdE51bGwoKSxcclxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKSxcclxuICBvcmRlcjogaW50ZWdlcignb3JkZXInKS5ub3ROdWxsKCksXHJcbiAgaXNQdWJsaXNoZWQ6IGJvb2xlYW4oJ2lzX3B1Ymxpc2hlZCcpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxyXG4gIGR1cmF0aW9uOiBpbnRlZ2VyKCdkdXJhdGlvbicpLm5vdE51bGwoKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbi8vIENoYXB0ZXJzIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBjaGFwdGVycyA9IHBnVGFibGUoJ2NoYXB0ZXJzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIG1vZHVsZUlkOiBpbnRlZ2VyKCdtb2R1bGVfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBtb2R1bGVzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdGl0bGU6IHRleHQoJ3RpdGxlJykubm90TnVsbCgpLFxyXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLFxyXG4gIHR5cGU6IHRleHQoJ3R5cGUnKS5ub3ROdWxsKCksXHJcbiAgb3JkZXI6IGludGVnZXIoJ29yZGVyJykubm90TnVsbCgpLFxyXG4gIGlzUHVibGlzaGVkOiBib29sZWFuKCdpc19wdWJsaXNoZWQnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBwcmVyZXF1aXNpdGVDaGFwdGVySWQ6IGludGVnZXIoJ3ByZXJlcXVpc2l0ZV9jaGFwdGVyX2lkJyksXHJcblxyXG4gIC8vIFZpZGVvIHNwZWNpZmljIGZpZWxkc1xyXG4gIHZpZGVvVXJsOiB0ZXh0KCd2aWRlb191cmwnKSxcclxuICB2aWRlb1Byb3ZpZGVyOiB0ZXh0KCd2aWRlb19wcm92aWRlcicpLFxyXG4gIHZpZGVvRHVyYXRpb246IGludGVnZXIoJ3ZpZGVvX2R1cmF0aW9uJyksXHJcbiAgdHJhbnNjcmlwdDogdGV4dCgndHJhbnNjcmlwdCcpLFxyXG5cclxuICAvLyBUZXh0Ym9vayBzcGVjaWZpYyBmaWVsZHNcclxuICB0ZXh0Ym9va0NvbnRlbnQ6IHRleHQoJ3RleHRib29rX2NvbnRlbnQnKSxcclxuICB0ZXh0Ym9va0ZpbGVVcmw6IHRleHQoJ3RleHRib29rX2ZpbGVfdXJsJyksXHJcbiAgcmVhZGluZ1RpbWU6IGludGVnZXIoJ3JlYWRpbmdfdGltZScpLFxyXG5cclxuICAvLyBNQ1Egc3BlY2lmaWMgZmllbGRzXHJcbiAgbWNxRGF0YTogdGV4dCgnbWNxX2RhdGEnKSxcclxuXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyBRdWl6emVzIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBxdWl6emVzID0gcGdUYWJsZSgncXVpenplcycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBjaGFwdGVySWQ6IGludGVnZXIoJ2NoYXB0ZXJfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBjaGFwdGVycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHRpdGxlOiB0ZXh0KCd0aXRsZScpLm5vdE51bGwoKSxcclxuICBwYXNzTWFyazogaW50ZWdlcigncGFzc19tYXJrJykubm90TnVsbCgpLmRlZmF1bHQoNzApLFxyXG4gIHRpbWVMaW1pdDogaW50ZWdlcigndGltZV9saW1pdCcpLFxyXG4gIHNob3dBbnN3ZXJzOiBib29sZWFuKCdzaG93X2Fuc3dlcnMnKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcclxuICBtYXhBdHRlbXB0czogaW50ZWdlcignbWF4X2F0dGVtcHRzJykubm90TnVsbCgpLmRlZmF1bHQoMyksXHJcbiAgaXNQdWJsaXNoZWQ6IGJvb2xlYW4oJ2lzX3B1Ymxpc2hlZCcpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbn0pO1xyXG5cclxuLy8gUXVpeiBRdWVzdGlvbnMgdGFibGVcclxuZXhwb3J0IGNvbnN0IHF1aXpRdWVzdGlvbnMgPSBwZ1RhYmxlKCdxdWl6X3F1ZXN0aW9ucycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBxdWl6SWQ6IGludGVnZXIoJ3F1aXpfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBxdWl6emVzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgcXVlc3Rpb246IHRleHQoJ3F1ZXN0aW9uJykubm90TnVsbCgpLFxyXG4gIG9wdGlvbnM6IHRleHQoJ29wdGlvbnMnKS5ub3ROdWxsKCksXHJcbiAgY29ycmVjdEFuc3dlcjogdGV4dCgnY29ycmVjdF9hbnN3ZXInKS5ub3ROdWxsKCksXHJcbiAgZXhwbGFuYXRpb246IHRleHQoJ2V4cGxhbmF0aW9uJyksXHJcbiAgb3JkZXI6IGludGVnZXIoJ29yZGVyJykubm90TnVsbCgpLFxyXG59KTtcclxuXHJcbi8vIEJsb2cgUG9zdHMgdGFibGVcclxuZXhwb3J0IGNvbnN0IGJsb2dQb3N0cyA9IHBnVGFibGUoJ2Jsb2dfcG9zdHMnLCB7XHJcbiAgaWQ6IHNlcmlhbCgnaWQnKS5wcmltYXJ5S2V5KCksXHJcbiAgdGl0bGU6IHRleHQoJ3RpdGxlJykubm90TnVsbCgpLFxyXG4gIHNsdWc6IHRleHQoJ3NsdWcnKS51bmlxdWUoKS5ub3ROdWxsKCksXHJcbiAgY29udGVudDogdGV4dCgnY29udGVudCcpLm5vdE51bGwoKSxcclxuICBhdXRob3I6IHRleHQoJ2F1dGhvcicpLm5vdE51bGwoKSxcclxuICBjb3ZlcjogdGV4dCgnY292ZXInKSxcclxuICB0YWdzOiB0ZXh0KCd0YWdzJykubm90TnVsbCgpLmRlZmF1bHQoJ1tdJyksXHJcbiAgc3RhdHVzOiB0ZXh0KCdzdGF0dXMnKS5ub3ROdWxsKCkuZGVmYXVsdCgnZHJhZnQnKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbi8vIEFjY2VzcyBSZXF1ZXN0cyB0YWJsZVxyXG5leHBvcnQgY29uc3QgYWNjZXNzUmVxdWVzdHMgPSBwZ1RhYmxlKCdhY2Nlc3NfcmVxdWVzdHMnLCB7XHJcbiAgaWQ6IHNlcmlhbCgnaWQnKS5wcmltYXJ5S2V5KCksXHJcbiAgc3R1ZGVudElkOiBpbnRlZ2VyKCdzdHVkZW50X2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQsIHsgb25EZWxldGU6ICdjYXNjYWRlJyB9KSxcclxuICBjb3Vyc2VJZDogaW50ZWdlcignY291cnNlX2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gY291cnNlcy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHJlYXNvbjogdGV4dCgncmVhc29uJyksXHJcbiAgc3RhdHVzOiB0ZXh0KCdzdGF0dXMnKS5ub3ROdWxsKCkuZGVmYXVsdCgncGVuZGluZycpLFxyXG4gIHJlcXVlc3RlZEF0OiB0aW1lc3RhbXAoJ3JlcXVlc3RlZF9hdCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbiAgcmV2aWV3ZWRBdDogdGltZXN0YW1wKCdyZXZpZXdlZF9hdCcpLFxyXG4gIHJldmlld2VkQnk6IGludGVnZXIoJ3Jldmlld2VkX2J5JykucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXHJcbn0pO1xyXG5cclxuLy8gU3R1ZGVudCBQcm9ncmVzcyB0YWJsZVxyXG5leHBvcnQgY29uc3Qgc3R1ZGVudFByb2dyZXNzID0gcGdUYWJsZSgnc3R1ZGVudF9wcm9ncmVzcycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBzdHVkZW50SWQ6IGludGVnZXIoJ3N0dWRlbnRfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIGNvdXJzZUlkOiBpbnRlZ2VyKCdjb3Vyc2VfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBjb3Vyc2VzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgY29tcGxldGVkQ2hhcHRlcnM6IHRleHQoJ2NvbXBsZXRlZF9jaGFwdGVycycpLm5vdE51bGwoKS5kZWZhdWx0KCdbXScpLFxyXG4gIHdhdGNoZWRWaWRlb3M6IHRleHQoJ3dhdGNoZWRfdmlkZW9zJykubm90TnVsbCgpLmRlZmF1bHQoJ1tdJyksXHJcbiAgcXVpekF0dGVtcHRzOiB0ZXh0KCdxdWl6X2F0dGVtcHRzJykubm90TnVsbCgpLmRlZmF1bHQoJ1tdJyksXHJcbiAgdG90YWxQcm9ncmVzczogaW50ZWdlcigndG90YWxfcHJvZ3Jlc3MnKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcclxuICBsYXN0QWNjZXNzZWQ6IHRpbWVzdGFtcCgnbGFzdF9hY2Nlc3NlZCcpLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXHJcbn0pO1xyXG5cclxuLy8gRGFpbHkgVmlkZW9zIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBkYWlseVZpZGVvcyA9IHBnVGFibGUoJ2RhaWx5X3ZpZGVvcycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBjaGFwdGVySWQ6IGludGVnZXIoJ2NoYXB0ZXJfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBjaGFwdGVycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHRpdGxlOiB0ZXh0KCd0aXRsZScpLm5vdE51bGwoKSxcclxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKSxcclxuICBkYXk6IGludGVnZXIoJ2RheScpLm5vdE51bGwoKSxcclxuICBpc0FjdGl2ZTogYm9vbGVhbignaXNfYWN0aXZlJykubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbi8vIE5vdGlmaWNhdGlvbnMgdGFibGVcclxuZXhwb3J0IGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBwZ1RhYmxlKCdub3RpZmljYXRpb25zJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIHVzZXJJZDogaW50ZWdlcigndXNlcl9pZCcpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdGl0bGU6IHRleHQoJ3RpdGxlJykubm90TnVsbCgpLFxyXG4gIG1lc3NhZ2U6IHRleHQoJ21lc3NhZ2UnKS5ub3ROdWxsKCksXHJcbiAgdHlwZTogdGV4dCgndHlwZScpLm5vdE51bGwoKS5kZWZhdWx0KCdpbmZvJyksXHJcbiAgaXNSZWFkOiBib29sZWFuKCdpc19yZWFkJykubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyBTZXNzaW9ucyB0YWJsZSBmb3Igc2Vzc2lvbiBtYW5hZ2VtZW50XHJcbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IHBnVGFibGUoJ3Nlc3Npb25zJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIHVzZXJJZDogaW50ZWdlcigndXNlcl9pZCcpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgc2Vzc2lvblRva2VuOiB0ZXh0KCdzZXNzaW9uX3Rva2VuJykudW5pcXVlKCkubm90TnVsbCgpLFxyXG4gIGRldmljZUluZm86IHRleHQoJ2RldmljZV9pbmZvJyksXHJcbiAgZXhwaXJlc0F0OiB0aW1lc3RhbXAoJ2V4cGlyZXNfYXQnKS5ub3ROdWxsKCksXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG59KTtcclxuXHJcbi8vIFBheW1lbnRzL1RyYW5zYWN0aW9ucyB0YWJsZVxyXG5leHBvcnQgY29uc3QgcGF5bWVudHMgPSBwZ1RhYmxlKCdwYXltZW50cycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICB1c2VySWQ6IGludGVnZXIoJ3VzZXJfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIGNvdXJzZUlkOiBpbnRlZ2VyKCdjb3Vyc2VfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBjb3Vyc2VzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgYW1vdW50OiByZWFsKCdhbW91bnQnKS5ub3ROdWxsKCksXHJcbiAgY3VycmVuY3k6IHRleHQoJ2N1cnJlbmN5Jykubm90TnVsbCgpLmRlZmF1bHQoJ0lOUicpLFxyXG4gIHN0YXR1czogdGV4dCgnc3RhdHVzJykubm90TnVsbCgpLmRlZmF1bHQoJ3BlbmRpbmcnKSwgLy8gcGVuZGluZywgY29tcGxldGVkLCBmYWlsZWQsIHJlZnVuZGVkXHJcbiAgc3RyaXBlUGF5bWVudEludGVudElkOiB0ZXh0KCdzdHJpcGVfcGF5bWVudF9pbnRlbnRfaWQnKSxcclxuICBzdHJpcGVTZXNzaW9uSWQ6IHRleHQoJ3N0cmlwZV9zZXNzaW9uX2lkJyksXHJcbiAgcGF5bWVudE1ldGhvZDogdGV4dCgncGF5bWVudF9tZXRob2QnKSxcclxuICB0cmFuc2FjdGlvbklkOiB0ZXh0KCd0cmFuc2FjdGlvbl9pZCcpLFxyXG4gIG1ldGFkYXRhOiB0ZXh0KCdtZXRhZGF0YScpLCAvLyBKU09OIHN0cmluZyBmb3IgYWRkaXRpb25hbCBkYXRhXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxyXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0Jykubm90TnVsbCgpLmRlZmF1bHROb3coKSxcclxufSk7XHJcblxyXG4vLyBSZWxhdGlvbnNcclxuZXhwb3J0IGNvbnN0IHVzZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKHVzZXJzLCAoeyBtYW55IH0pID0+ICh7XHJcbiAgYWNjZXNzUmVxdWVzdHM6IG1hbnkoYWNjZXNzUmVxdWVzdHMpLFxyXG4gIHN0dWRlbnRQcm9ncmVzczogbWFueShzdHVkZW50UHJvZ3Jlc3MpLFxyXG4gIG5vdGlmaWNhdGlvbnM6IG1hbnkobm90aWZpY2F0aW9ucyksXHJcbiAgc2Vzc2lvbnM6IG1hbnkoc2Vzc2lvbnMpLFxyXG4gIHJldmlld2VkUmVxdWVzdHM6IG1hbnkoYWNjZXNzUmVxdWVzdHMsIHsgcmVsYXRpb25OYW1lOiAncmV2aWV3ZXInIH0pLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgY291cnNlc1JlbGF0aW9ucyA9IHJlbGF0aW9ucyhjb3Vyc2VzLCAoeyBtYW55IH0pID0+ICh7XHJcbiAgbW9kdWxlczogbWFueShtb2R1bGVzKSxcclxuICBhY2Nlc3NSZXF1ZXN0czogbWFueShhY2Nlc3NSZXF1ZXN0cyksXHJcbiAgc3R1ZGVudFByb2dyZXNzOiBtYW55KHN0dWRlbnRQcm9ncmVzcyksXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtb2R1bGVzUmVsYXRpb25zID0gcmVsYXRpb25zKG1vZHVsZXMsICh7IG9uZSwgbWFueSB9KSA9PiAoe1xyXG4gIGNvdXJzZTogb25lKGNvdXJzZXMsIHtcclxuICAgIGZpZWxkczogW21vZHVsZXMuY291cnNlSWRdLFxyXG4gICAgcmVmZXJlbmNlczogW2NvdXJzZXMuaWRdLFxyXG4gIH0pLFxyXG4gIGNoYXB0ZXJzOiBtYW55KGNoYXB0ZXJzKSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoYXB0ZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKGNoYXB0ZXJzLCAoeyBvbmUsIG1hbnkgfSkgPT4gKHtcclxuICBtb2R1bGU6IG9uZShtb2R1bGVzLCB7XHJcbiAgICBmaWVsZHM6IFtjaGFwdGVycy5tb2R1bGVJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbbW9kdWxlcy5pZF0sXHJcbiAgfSksXHJcbiAgcHJlcmVxdWlzaXRlQ2hhcHRlcjogb25lKGNoYXB0ZXJzLCB7XHJcbiAgICBmaWVsZHM6IFtjaGFwdGVycy5wcmVyZXF1aXNpdGVDaGFwdGVySWRdLFxyXG4gICAgcmVmZXJlbmNlczogW2NoYXB0ZXJzLmlkXSxcclxuICB9KSxcclxuICBxdWl6emVzOiBtYW55KHF1aXp6ZXMpLFxyXG4gIGRhaWx5VmlkZW9zOiBtYW55KGRhaWx5VmlkZW9zKSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHF1aXp6ZXNSZWxhdGlvbnMgPSByZWxhdGlvbnMocXVpenplcywgKHsgb25lLCBtYW55IH0pID0+ICh7XHJcbiAgY2hhcHRlcjogb25lKGNoYXB0ZXJzLCB7XHJcbiAgICBmaWVsZHM6IFtxdWl6emVzLmNoYXB0ZXJJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbY2hhcHRlcnMuaWRdLFxyXG4gIH0pLFxyXG4gIHF1ZXN0aW9uczogbWFueShxdWl6UXVlc3Rpb25zKSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHF1aXpRdWVzdGlvbnNSZWxhdGlvbnMgPSByZWxhdGlvbnMocXVpelF1ZXN0aW9ucywgKHsgb25lIH0pID0+ICh7XHJcbiAgcXVpejogb25lKHF1aXp6ZXMsIHtcclxuICAgIGZpZWxkczogW3F1aXpRdWVzdGlvbnMucXVpeklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFtxdWl6emVzLmlkXSxcclxuICB9KSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFjY2Vzc1JlcXVlc3RzUmVsYXRpb25zID0gcmVsYXRpb25zKGFjY2Vzc1JlcXVlc3RzLCAoeyBvbmUgfSkgPT4gKHtcclxuICBzdHVkZW50OiBvbmUodXNlcnMsIHtcclxuICAgIGZpZWxkczogW2FjY2Vzc1JlcXVlc3RzLnN0dWRlbnRJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxyXG4gIH0pLFxyXG4gIGNvdXJzZTogb25lKGNvdXJzZXMsIHtcclxuICAgIGZpZWxkczogW2FjY2Vzc1JlcXVlc3RzLmNvdXJzZUlkXSxcclxuICAgIHJlZmVyZW5jZXM6IFtjb3Vyc2VzLmlkXSxcclxuICB9KSxcclxuICByZXZpZXdlcjogb25lKHVzZXJzLCB7XHJcbiAgICBmaWVsZHM6IFthY2Nlc3NSZXF1ZXN0cy5yZXZpZXdlZEJ5XSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgICByZWxhdGlvbk5hbWU6ICdyZXZpZXdlcicsXHJcbiAgfSksXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzdHVkZW50UHJvZ3Jlc3NSZWxhdGlvbnMgPSByZWxhdGlvbnMoc3R1ZGVudFByb2dyZXNzLCAoeyBvbmUgfSkgPT4gKHtcclxuICBzdHVkZW50OiBvbmUodXNlcnMsIHtcclxuICAgIGZpZWxkczogW3N0dWRlbnRQcm9ncmVzcy5zdHVkZW50SWRdLFxyXG4gICAgcmVmZXJlbmNlczogW3VzZXJzLmlkXSxcclxuICB9KSxcclxuICBjb3Vyc2U6IG9uZShjb3Vyc2VzLCB7XHJcbiAgICBmaWVsZHM6IFtzdHVkZW50UHJvZ3Jlc3MuY291cnNlSWRdLFxyXG4gICAgcmVmZXJlbmNlczogW2NvdXJzZXMuaWRdLFxyXG4gIH0pLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgZGFpbHlWaWRlb3NSZWxhdGlvbnMgPSByZWxhdGlvbnMoZGFpbHlWaWRlb3MsICh7IG9uZSB9KSA9PiAoe1xyXG4gIGNoYXB0ZXI6IG9uZShjaGFwdGVycywge1xyXG4gICAgZmllbGRzOiBbZGFpbHlWaWRlb3MuY2hhcHRlcklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFtjaGFwdGVycy5pZF0sXHJcbiAgfSksXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBub3RpZmljYXRpb25zUmVsYXRpb25zID0gcmVsYXRpb25zKG5vdGlmaWNhdGlvbnMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIHVzZXI6IG9uZSh1c2Vycywge1xyXG4gICAgZmllbGRzOiBbbm90aWZpY2F0aW9ucy51c2VySWRdLFxyXG4gICAgcmVmZXJlbmNlczogW3VzZXJzLmlkXSxcclxuICB9KSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlc3Npb25zUmVsYXRpb25zID0gcmVsYXRpb25zKHNlc3Npb25zLCAoeyBvbmUgfSkgPT4gKHtcclxuICB1c2VyOiBvbmUodXNlcnMsIHtcclxuICAgIGZpZWxkczogW3Nlc3Npb25zLnVzZXJJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxyXG4gIH0pLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgcGF5bWVudHNSZWxhdGlvbnMgPSByZWxhdGlvbnMocGF5bWVudHMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIHVzZXI6IG9uZSh1c2Vycywge1xyXG4gICAgZmllbGRzOiBbcGF5bWVudHMudXNlcklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgfSksXHJcbiAgY291cnNlOiBvbmUoY291cnNlcywge1xyXG4gICAgZmllbGRzOiBbcGF5bWVudHMuY291cnNlSWRdLFxyXG4gICAgcmVmZXJlbmNlczogW2NvdXJzZXMuaWRdLFxyXG4gIH0pLFxyXG59KSk7XHJcbiJdLCJuYW1lcyI6WyJwZ1RhYmxlIiwidGV4dCIsInNlcmlhbCIsImludGVnZXIiLCJyZWFsIiwiYm9vbGVhbiIsInRpbWVzdGFtcCIsInVuaXF1ZSIsInJlbGF0aW9ucyIsInVzZXJzIiwiaWQiLCJwcmltYXJ5S2V5IiwibmFtZSIsIm5vdE51bGwiLCJlbWFpbCIsInBhc3N3b3JkIiwicGhvbmUiLCJyb2xlIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiZmFjZUlkRW5yb2xsZWQiLCJmYWNlVGVtcGxhdGUiLCJmaW5nZXJwcmludEVucm9sbGVkIiwiZmluZ2VycHJpbnRDcmVkZW50aWFsSWQiLCJ0d29GYWN0b3JFbmFibGVkIiwidHdvRmFjdG9yU2VjcmV0IiwidHdvRmFjdG9yQmFja3VwQ29kZXMiLCJiaW8iLCJwcm9maWxlUGljdHVyZSIsImpvaW5lZERhdGUiLCJkZWZhdWx0Tm93IiwibGFzdExvZ2luIiwicmVzZXRUb2tlbiIsInJlc2V0VG9rZW5FeHBpcnkiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ0YWJsZSIsImVtYWlsUm9sZVVuaXF1ZSIsIm9uIiwiY291cnNlcyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJpbnN0cnVjdG9yIiwidGh1bWJuYWlsIiwicHJpY2luZyIsInN0YXR1cyIsImlzUmVxdWVzdGFibGUiLCJpc0RlZmF1bHRVbmxvY2tlZCIsIm1vZHVsZXMiLCJjb3Vyc2VJZCIsInJlZmVyZW5jZXMiLCJvbkRlbGV0ZSIsIm9yZGVyIiwiaXNQdWJsaXNoZWQiLCJkdXJhdGlvbiIsImNoYXB0ZXJzIiwibW9kdWxlSWQiLCJ0eXBlIiwicHJlcmVxdWlzaXRlQ2hhcHRlcklkIiwidmlkZW9VcmwiLCJ2aWRlb1Byb3ZpZGVyIiwidmlkZW9EdXJhdGlvbiIsInRyYW5zY3JpcHQiLCJ0ZXh0Ym9va0NvbnRlbnQiLCJ0ZXh0Ym9va0ZpbGVVcmwiLCJyZWFkaW5nVGltZSIsIm1jcURhdGEiLCJxdWl6emVzIiwiY2hhcHRlcklkIiwicGFzc01hcmsiLCJ0aW1lTGltaXQiLCJzaG93QW5zd2VycyIsIm1heEF0dGVtcHRzIiwicXVpelF1ZXN0aW9ucyIsInF1aXpJZCIsInF1ZXN0aW9uIiwib3B0aW9ucyIsImNvcnJlY3RBbnN3ZXIiLCJleHBsYW5hdGlvbiIsImJsb2dQb3N0cyIsInNsdWciLCJjb250ZW50IiwiYXV0aG9yIiwiY292ZXIiLCJ0YWdzIiwiYWNjZXNzUmVxdWVzdHMiLCJzdHVkZW50SWQiLCJyZWFzb24iLCJyZXF1ZXN0ZWRBdCIsInJldmlld2VkQXQiLCJyZXZpZXdlZEJ5Iiwic3R1ZGVudFByb2dyZXNzIiwiY29tcGxldGVkQ2hhcHRlcnMiLCJ3YXRjaGVkVmlkZW9zIiwicXVpekF0dGVtcHRzIiwidG90YWxQcm9ncmVzcyIsImxhc3RBY2Nlc3NlZCIsImRhaWx5VmlkZW9zIiwiZGF5Iiwibm90aWZpY2F0aW9ucyIsInVzZXJJZCIsIm1lc3NhZ2UiLCJpc1JlYWQiLCJzZXNzaW9ucyIsInNlc3Npb25Ub2tlbiIsImRldmljZUluZm8iLCJleHBpcmVzQXQiLCJwYXltZW50cyIsImFtb3VudCIsImN1cnJlbmN5Iiwic3RyaXBlUGF5bWVudEludGVudElkIiwic3RyaXBlU2Vzc2lvbklkIiwicGF5bWVudE1ldGhvZCIsInRyYW5zYWN0aW9uSWQiLCJtZXRhZGF0YSIsInVzZXJzUmVsYXRpb25zIiwibWFueSIsInJldmlld2VkUmVxdWVzdHMiLCJyZWxhdGlvbk5hbWUiLCJjb3Vyc2VzUmVsYXRpb25zIiwibW9kdWxlc1JlbGF0aW9ucyIsIm9uZSIsImNvdXJzZSIsImZpZWxkcyIsImNoYXB0ZXJzUmVsYXRpb25zIiwibW9kdWxlIiwicHJlcmVxdWlzaXRlQ2hhcHRlciIsInF1aXp6ZXNSZWxhdGlvbnMiLCJjaGFwdGVyIiwicXVlc3Rpb25zIiwicXVpelF1ZXN0aW9uc1JlbGF0aW9ucyIsInF1aXoiLCJhY2Nlc3NSZXF1ZXN0c1JlbGF0aW9ucyIsInN0dWRlbnQiLCJyZXZpZXdlciIsInN0dWRlbnRQcm9ncmVzc1JlbGF0aW9ucyIsImRhaWx5VmlkZW9zUmVsYXRpb25zIiwibm90aWZpY2F0aW9uc1JlbGF0aW9ucyIsInVzZXIiLCJzZXNzaW9uc1JlbGF0aW9ucyIsInBheW1lbnRzUmVsYXRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/schema.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/security.ts":
/*!*****************************!*\
  !*** ./src/lib/security.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   containsSQLInjection: () => (/* binding */ containsSQLInjection),\n/* harmony export */   escapeHtml: () => (/* binding */ escapeHtml),\n/* harmony export */   generateSecureToken: () => (/* binding */ generateSecureToken),\n/* harmony export */   getClientIP: () => (/* binding */ getClientIP),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   sanitizeForSQL: () => (/* binding */ sanitizeForSQL),\n/* harmony export */   sanitizeString: () => (/* binding */ sanitizeString),\n/* harmony export */   validateBodySize: () => (/* binding */ validateBodySize),\n/* harmony export */   validateEmail: () => (/* binding */ validateEmail),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword),\n/* harmony export */   validatePhone: () => (/* binding */ validatePhone)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n// Rate limiting store (in-memory, use Redis in production)\nconst rateLimitStore = new Map();\n// Input validation and sanitization\nfunction sanitizeString(input, maxLength = 255) {\n    if (typeof input !== \"string\") return \"\";\n    return input.trim().slice(0, maxLength).replace(/[<>]/g, \"\"); // Basic XSS prevention\n}\nfunction validateEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email) && email.length <= 255;\n}\nfunction validatePassword(password) {\n    if (password.length < 8) {\n        return {\n            valid: false,\n            error: \"Password must be at least 8 characters long\"\n        };\n    }\n    if (password.length > 128) {\n        return {\n            valid: false,\n            error: \"Password must be less than 128 characters\"\n        };\n    }\n    // Require at least one letter and one number\n    if (!/[a-zA-Z]/.test(password)) {\n        return {\n            valid: false,\n            error: \"Password must contain at least one letter\"\n        };\n    }\n    if (!/[0-9]/.test(password)) {\n        return {\n            valid: false,\n            error: \"Password must contain at least one number\"\n        };\n    }\n    return {\n        valid: true\n    };\n}\nfunction validatePhone(phone) {\n    // Basic phone validation - adjust regex for your needs\n    const phoneRegex = /^[\\d\\s\\-\\+\\(\\)]{10,20}$/;\n    return phoneRegex.test(phone);\n}\n// Generate secure random token\nfunction generateSecureToken(length = 32) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(length).toString(\"hex\");\n}\n// Rate limiting\nfunction rateLimit(identifier, maxRequests = 5, windowMs = 15 * 60 * 1000 // 15 minutes\n) {\n    const now = Date.now();\n    const key = identifier;\n    const record = rateLimitStore.get(key);\n    if (!record || now > record.resetTime) {\n        // New window\n        rateLimitStore.set(key, {\n            count: 1,\n            resetTime: now + windowMs\n        });\n        return {\n            allowed: true,\n            remaining: maxRequests - 1,\n            resetTime: now + windowMs\n        };\n    }\n    if (record.count >= maxRequests) {\n        return {\n            allowed: false,\n            remaining: 0,\n            resetTime: record.resetTime\n        };\n    }\n    record.count++;\n    rateLimitStore.set(key, record);\n    return {\n        allowed: true,\n        remaining: maxRequests - record.count,\n        resetTime: record.resetTime\n    };\n}\n// Get client IP for rate limiting\nfunction getClientIP(request) {\n    const forwarded = request.headers.get(\"x-forwarded-for\");\n    const realIP = request.headers.get(\"x-real-ip\");\n    const ip = forwarded?.split(\",\")[0] || realIP || request.ip || \"unknown\";\n    return ip;\n}\n// XSS protection - escape HTML\nfunction escapeHtml(text) {\n    const map = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#039;\"\n    };\n    return text.replace(/[&<>\"']/g, (m)=>map[m]);\n}\n// Validate request body size\nfunction validateBodySize(body, maxSize = 1024 * 1024) {\n    return Buffer.byteLength(body, \"utf8\") <= maxSize;\n}\n// Check if string contains SQL injection patterns\nfunction containsSQLInjection(input) {\n    const sqlPatterns = [\n        /(\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|EXECUTE)\\b)/i,\n        /(--|#|\\/\\*|\\*\\/|;)/,\n        /(\\b(OR|AND)\\s+\\d+\\s*=\\s*\\d+)/i,\n        /(\\bUNION\\s+SELECT\\b)/i\n    ];\n    return sqlPatterns.some((pattern)=>pattern.test(input));\n}\n// Sanitize for SQL (though we use ORM, this is extra protection)\nfunction sanitizeForSQL(input) {\n    if (containsSQLInjection(input)) {\n        throw new Error(\"Invalid input detected\");\n    }\n    return input;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ3JDLE1BQU1DLE1BQWlDO1FBQ3JDLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO0lBQ1A7SUFDQSxPQUFPRCxLQUFLdEMsT0FBTyxDQUFDLFlBQVksQ0FBQ3dDLElBQU1ELEdBQUcsQ0FBQ0MsRUFBRTtBQUMvQztBQUVBLDZCQUE2QjtBQUN0QixTQUFTQyxpQkFBaUJDLElBQVksRUFBRUMsVUFBa0IsT0FBTyxJQUFJO0lBQzFFLE9BQU9DLE9BQU9DLFVBQVUsQ0FBQ0gsTUFBTSxXQUFXQztBQUM1QztBQUVBLGtEQUFrRDtBQUMzQyxTQUFTRyxxQkFBcUJsRCxLQUFhO0lBQ2hELE1BQU1tRCxjQUFjO1FBQ2xCO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFDRCxPQUFPQSxZQUFZQyxJQUFJLENBQUNDLENBQUFBLFVBQVdBLFFBQVE3QyxJQUFJLENBQUNSO0FBQ2xEO0FBRUEsaUVBQWlFO0FBQzFELFNBQVNzRCxlQUFldEQsS0FBYTtJQUMxQyxJQUFJa0QscUJBQXFCbEQsUUFBUTtRQUMvQixNQUFNLElBQUl1RCxNQUFNO0lBQ2xCO0lBQ0EsT0FBT3ZEO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sbXMtcGxhdGZvcm0vLi9zcmMvbGliL3NlY3VyaXR5LnRzP2RhNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcclxuXHJcbi8vIFJhdGUgbGltaXRpbmcgc3RvcmUgKGluLW1lbW9yeSwgdXNlIFJlZGlzIGluIHByb2R1Y3Rpb24pXHJcbmNvbnN0IHJhdGVMaW1pdFN0b3JlID0gbmV3IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfT4oKTtcclxuXHJcbi8vIElucHV0IHZhbGlkYXRpb24gYW5kIHNhbml0aXphdGlvblxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTdHJpbmcoaW5wdXQ6IHN0cmluZywgbWF4TGVuZ3RoOiBudW1iZXIgPSAyNTUpOiBzdHJpbmcge1xyXG4gIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XHJcbiAgcmV0dXJuIGlucHV0XHJcbiAgICAudHJpbSgpXHJcbiAgICAuc2xpY2UoMCwgbWF4TGVuZ3RoKVxyXG4gICAgLnJlcGxhY2UoL1s8Pl0vZywgJycpOyAvLyBCYXNpYyBYU1MgcHJldmVudGlvblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xyXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QoZW1haWwpICYmIGVtYWlsLmxlbmd0aCA8PSAyNTU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcclxuICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmcnIH07XHJcbiAgfVxyXG4gIGlmIChwYXNzd29yZC5sZW5ndGggPiAxMjgpIHtcclxuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdQYXNzd29yZCBtdXN0IGJlIGxlc3MgdGhhbiAxMjggY2hhcmFjdGVycycgfTtcclxuICB9XHJcbiAgLy8gUmVxdWlyZSBhdCBsZWFzdCBvbmUgbGV0dGVyIGFuZCBvbmUgbnVtYmVyXHJcbiAgaWYgKCEvW2EtekEtWl0vLnRlc3QocGFzc3dvcmQpKSB7XHJcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsZXR0ZXInIH07XHJcbiAgfVxyXG4gIGlmICghL1swLTldLy50ZXN0KHBhc3N3b3JkKSkge1xyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgbnVtYmVyJyB9O1xyXG4gIH1cclxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQaG9uZShwaG9uZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgLy8gQmFzaWMgcGhvbmUgdmFsaWRhdGlvbiAtIGFkanVzdCByZWdleCBmb3IgeW91ciBuZWVkc1xyXG4gIGNvbnN0IHBob25lUmVnZXggPSAvXltcXGRcXHNcXC1cXCtcXChcXCldezEwLDIwfSQvO1xyXG4gIHJldHVybiBwaG9uZVJlZ2V4LnRlc3QocGhvbmUpO1xyXG59XHJcblxyXG4vLyBHZW5lcmF0ZSBzZWN1cmUgcmFuZG9tIHRva2VuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZVRva2VuKGxlbmd0aDogbnVtYmVyID0gMzIpOiBzdHJpbmcge1xyXG4gIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMobGVuZ3RoKS50b1N0cmluZygnaGV4Jyk7XHJcbn1cclxuXHJcbi8vIFJhdGUgbGltaXRpbmdcclxuZXhwb3J0IGZ1bmN0aW9uIHJhdGVMaW1pdChcclxuICBpZGVudGlmaWVyOiBzdHJpbmcsXHJcbiAgbWF4UmVxdWVzdHM6IG51bWJlciA9IDUsXHJcbiAgd2luZG93TXM6IG51bWJlciA9IDE1ICogNjAgKiAxMDAwIC8vIDE1IG1pbnV0ZXNcclxuKTogeyBhbGxvd2VkOiBib29sZWFuOyByZW1haW5pbmc6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICBjb25zdCBrZXkgPSBpZGVudGlmaWVyO1xyXG4gIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpO1xyXG5cclxuICBpZiAoIXJlY29yZCB8fCBub3cgPiByZWNvcmQucmVzZXRUaW1lKSB7XHJcbiAgICAvLyBOZXcgd2luZG93XHJcbiAgICByYXRlTGltaXRTdG9yZS5zZXQoa2V5LCB7XHJcbiAgICAgIGNvdW50OiAxLFxyXG4gICAgICByZXNldFRpbWU6IG5vdyArIHdpbmRvd01zLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhbGxvd2VkOiB0cnVlLFxyXG4gICAgICByZW1haW5pbmc6IG1heFJlcXVlc3RzIC0gMSxcclxuICAgICAgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAocmVjb3JkLmNvdW50ID49IG1heFJlcXVlc3RzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhbGxvd2VkOiBmYWxzZSxcclxuICAgICAgcmVtYWluaW5nOiAwLFxyXG4gICAgICByZXNldFRpbWU6IHJlY29yZC5yZXNldFRpbWUsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmVjb3JkLmNvdW50Kys7XHJcbiAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgcmVjb3JkKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGFsbG93ZWQ6IHRydWUsXHJcbiAgICByZW1haW5pbmc6IG1heFJlcXVlc3RzIC0gcmVjb3JkLmNvdW50LFxyXG4gICAgcmVzZXRUaW1lOiByZWNvcmQucmVzZXRUaW1lLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIEdldCBjbGllbnQgSVAgZm9yIHJhdGUgbGltaXRpbmdcclxuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudElQKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHtcclxuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcclxuICBjb25zdCByZWFsSVAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKTtcclxuICBjb25zdCBpcCA9IGZvcndhcmRlZD8uc3BsaXQoJywnKVswXSB8fCByZWFsSVAgfHwgcmVxdWVzdC5pcCB8fCAndW5rbm93bic7XHJcbiAgcmV0dXJuIGlwO1xyXG59XHJcblxyXG4vLyBYU1MgcHJvdGVjdGlvbiAtIGVzY2FwZSBIVE1MXHJcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgbWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgJyYnOiAnJmFtcDsnLFxyXG4gICAgJzwnOiAnJmx0OycsXHJcbiAgICAnPic6ICcmZ3Q7JyxcclxuICAgICdcIic6ICcmcXVvdDsnLFxyXG4gICAgXCInXCI6ICcmIzAzOTsnLFxyXG4gIH07XHJcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvWyY8PlwiJ10vZywgKG0pID0+IG1hcFttXSk7XHJcbn1cclxuXHJcbi8vIFZhbGlkYXRlIHJlcXVlc3QgYm9keSBzaXplXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUJvZHlTaXplKGJvZHk6IHN0cmluZywgbWF4U2l6ZTogbnVtYmVyID0gMTAyNCAqIDEwMjQpOiBib29sZWFuIHtcclxuICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgJ3V0ZjgnKSA8PSBtYXhTaXplO1xyXG59XHJcblxyXG4vLyBDaGVjayBpZiBzdHJpbmcgY29udGFpbnMgU1FMIGluamVjdGlvbiBwYXR0ZXJuc1xyXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNTUUxJbmplY3Rpb24oaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHNxbFBhdHRlcm5zID0gW1xyXG4gICAgLyhcXGIoU0VMRUNUfElOU0VSVHxVUERBVEV8REVMRVRFfERST1B8Q1JFQVRFfEFMVEVSfEVYRUN8RVhFQ1VURSlcXGIpL2ksXHJcbiAgICAvKC0tfCN8XFwvXFwqfFxcKlxcL3w7KS8sXHJcbiAgICAvKFxcYihPUnxBTkQpXFxzK1xcZCtcXHMqPVxccypcXGQrKS9pLFxyXG4gICAgLyhcXGJVTklPTlxccytTRUxFQ1RcXGIpL2ksXHJcbiAgXTtcclxuICByZXR1cm4gc3FsUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChpbnB1dCkpO1xyXG59XHJcblxyXG4vLyBTYW5pdGl6ZSBmb3IgU1FMICh0aG91Z2ggd2UgdXNlIE9STSwgdGhpcyBpcyBleHRyYSBwcm90ZWN0aW9uKVxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGb3JTUUwoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgaWYgKGNvbnRhaW5zU1FMSW5qZWN0aW9uKGlucHV0KSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IGRldGVjdGVkJyk7XHJcbiAgfVxyXG4gIHJldHVybiBpbnB1dDtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImNyeXB0byIsInJhdGVMaW1pdFN0b3JlIiwiTWFwIiwic2FuaXRpemVTdHJpbmciLCJpbnB1dCIsIm1heExlbmd0aCIsInRyaW0iLCJzbGljZSIsInJlcGxhY2UiLCJ2YWxpZGF0ZUVtYWlsIiwiZW1haWwiLCJlbWFpbFJlZ2V4IiwidGVzdCIsImxlbmd0aCIsInZhbGlkYXRlUGFzc3dvcmQiLCJwYXNzd29yZCIsInZhbGlkIiwiZXJyb3IiLCJ2YWxpZGF0ZVBob25lIiwicGhvbmUiLCJwaG9uZVJlZ2V4IiwiZ2VuZXJhdGVTZWN1cmVUb2tlbiIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJyYXRlTGltaXQiLCJpZGVudGlmaWVyIiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsIm5vdyIsIkRhdGUiLCJrZXkiLCJyZWNvcmQiLCJnZXQiLCJyZXNldFRpbWUiLCJzZXQiLCJjb3VudCIsImFsbG93ZWQiLCJyZW1haW5pbmciLCJnZXRDbGllbnRJUCIsInJlcXVlc3QiLCJmb3J3YXJkZWQiLCJoZWFkZXJzIiwicmVhbElQIiwiaXAiLCJzcGxpdCIsImVzY2FwZUh0bWwiLCJ0ZXh0IiwibWFwIiwibSIsInZhbGlkYXRlQm9keVNpemUiLCJib2R5IiwibWF4U2l6ZSIsIkJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJjb250YWluc1NRTEluamVjdGlvbiIsInNxbFBhdHRlcm5zIiwic29tZSIsInBhdHRlcm4iLCJzYW5pdGl6ZUZvclNRTCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/security.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/drizzle-orm","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/bcryptjs","vendor-chunks/@neondatabase","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadhit%5CDesktop%5Clms-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();